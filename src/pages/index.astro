---
import Layout from '../layouts/Layout.astro';

const wordLists = {
  // ... (garder toutes les wordLists identiques)
  incidents: [
    "Suite aux r√©cents √©v√©nements qui ont touch√© notre communaut√© dioc√©saine",
    "Face aux difficult√©s pastorales que traverse notre dioc√®se en ces temps troubl√©s",
    "Concernant les situations port√©es √† notre attention",
    "√Ä la lumi√®re des t√©moignages qui nous sont parvenus",
    "Devant les d√©fis pastoraux auxquels nous sommes confront√©s",
    "En r√©ponse aux pr√©occupations exprim√©es par nos fid√®les",
    "Suite aux interrogations soulev√©es dans notre dioc√®se",
    "Face aux circonstances qui interpellent notre communaut√©",
    "Concernant les questions qui nous ont √©t√© rapport√©es",
    "√Ä la suite des √©v√©nements qui ont marqu√© notre famille dioc√©saine",
    "Devant les enjeux pastoraux de cette p√©riode d√©licate",
    "En r√©action aux inqui√©tudes exprim√©es"
  ],

  acknowledgments: [
    "nous reconnaissons que des dysfonctionnements ont pu survenir",
    "nous prenons acte des questionnements de notre communaut√©",
    "nous entendons les inqui√©tudes de nos paroissiens",
    "nous mesurons l'ampleur des interrogations suscit√©es",
    "nous sommes conscients des fragilit√©s de notre institution",
    "nous accueillons les interpellations qui nous sont adress√©es",
    "nous admettons que des manquements ont pu se produire",
    "nous comprenons les pr√©occupations de nos fid√®les",
    "nous entendons les questions l√©gitimes pos√©es",
    "nous reconnaissons les difficult√©s rencontr√©es",
    "nous sommes sensibles aux inqui√©tudes exprim√©es",
    "nous prenons la mesure des interrogations soulev√©es"
  ],

  apologies: [
    "manifestons notre proximit√© aux victimes et les encourageons √† aller de l'avant par le pardon",
    "t√©moignons notre compassion aux personnes troubl√©es et les invitons √† tourner la page dans la r√©conciliation",
    "exprimons notre soutien aux √¢mes √©branl√©es et les accompagnons pour avancer par la mis√©ricorde",
    "montrons notre solidarit√© aux personnes affect√©es et les encourageons √† passer √† autre chose dans le pardon",
    "manifestons notre compr√©hension aux victimes et les soutenons pour aller de l'avant par la r√©conciliation",
    "t√©moignons notre bienveillance aux personnes touch√©es et les invitons √† tourner la page dans la mis√©ricorde",
    "exprimons notre empathie aux victimes et les encourageons √† regarder vers l'avenir par le pardon",
    "montrons notre attention aux personnes √©prouv√©es et les accompagnons pour avancer dans la r√©conciliation",
    "manifestons notre fraternit√© aux victimes et les invitons √† aller de l'avant par la mis√©ricorde",
    "t√©moignons notre sollicitude aux √¢mes bless√©es et les encourageons √† tourner la page dans le pardon",
    "exprimons notre proximit√© aux personnes affect√©es et les soutenons pour passer √† autre chose par la r√©conciliation",
    "montrons notre compassion aux victimes et les accompagnons vers l'avenir dans la mis√©ricorde"
  ],

  misericorde: [
    "Rappelons que la mis√©ricorde divine s'√©tend √† tous, et doit guider notre discernement",
    "Le pardon √©vang√©lique concerne chaque membre de notre communaut√©, y compris les accus√©s",
    "La mis√©ricorde du Christ embrasse tous les enfants de Dieu sans exception",
    "La compassion divine rayonne sur chacun. La pr√©somption d'innocence demeure fondamentale",
    "Le pardon du Seigneur s'offre √† tous, m√™me aux plus fautifs d'entre nous",
    "M√©ditons sur la mis√©ricorde infinie qui unit tous nos fr√®res, victimes et coupables pr√©sum√©s, dans la charit√©"
  ],

  actions: [
    "Nous agissons fermement en mettant en place un processus d'√©valuation de nos pratiques",
    "Nous passons √† l'action en renfor√ßant nos dispositifs d'accompagnement spirituel",
    "Nous nous mobilisons r√©solument pour d√©velopper une d√©marche de discernement communautaire",
    "Nous prenons des mesures concr√®tes en instaurant des m√©canismes de dialogue renforc√©s",
    "Nous nous engageons activement √† consolider nos structures de formation pastorale",
    "Nous mettons tout en ≈ìuvre pour approfondir notre r√©flexion dans un esprit de synodalit√©"
  ],

  tourmentes: [
    "Dans la tourmente",
    "Au c≈ìur de la temp√™te",
    "En ces temps d'√©preuve",
    "Malgr√© les turbulences",
    "Dans cette p√©riode difficile",
    "Au sein de ces bouleversements",
    "Face √† l'adversit√©",
    "Dans ces moments troubl√©s",
    "Malgr√© les difficult√©s",
    "En d√©pit des √©preuves",
    "Dans ce contexte d√©licat",
    "Au milieu des d√©fis"
  ],

  goodFruits: [
    "il convient de ne pas occulter les fruits de gr√¢ce de nos paroisses",
    "nous devons garder √† l'esprit les t√©moignages de foi de notre dioc√®se",
    "il serait injuste d'ignorer les actions caritatives de nos communaut√©s",
    "nous ne saurions oublier les vocations qui confirment l'Esprit Saint",
    "rappelons-nous les signes d'esp√©rance de notre √âglise",
    "gardons pr√©sents les √©lans missionnaires qui nous dynamisent",
    "il importe de souligner les merveilles qui s'accomplissent dans nos paroisses",
    "nous devons reconna√Ætre les conversions authentiques de notre dioc√®se",
    "il serait dommage d'omettre les ≈ìuvres caritatives de nos fid√®les",
    "nous ne pouvons ignorer les gr√¢ces qui abondent dans nos communaut√©s",
    "rappelons les initiatives g√©n√©reuses qui fleurissent dans notre √âglise",
    "gardons en m√©moire les projets porteurs d'esp√©rance qui nous animent"
  ],

  originDeflection: [
    "sans nous leurrer sur l'origine de ces perturbations",
    "en gardant √† l'esprit les sources de ces troubles",
    "sans perdre de vue les ferments de division",
    "sans ignorer les v√©ritables causes de ces difficult√©s",
    "en identifiant clairement les racines de ces tensions",
    "sans oublier les influences qui alimentent ces pol√©miques"
  ],

  scapegoats: [
    "certains m√©dias en qu√™te de sensationnalisme",
    "des mouvements traditionalistes ferm√©s au souffle de l'Esprit",
    "des lobbies progressistes d√©connect√©s de la Tradition",
    "des r√©seaux occultes hostiles √† l'√âvangile",
    "des groupuscules anticl√©ricaux",
    "des influences s√©culi√®res cherchant √† saper notre rayonnement",
    "des organes de presse avides de pol√©miques",
    "des courants int√©gristes fig√©s dans leurs certitudes",
    "des factions modernistes √©trang√®res √† l'√âglise",
    "des cercles oppos√©s √† la mission √©vang√©lisatrice",
    "des militants nourris de pr√©jug√©s anti-religieux",
    "des forces s'acharnant √† ternir notre image"
  ],

  spiritualEndings: [
    "afin d'ouvrir des fen√™tres d'esp√©rance sur l'√©ternit√©",
    "pour que jaillissent des sources de gr√¢ce dans nos c≈ìurs",
    "en vue de faire germer la paix √©vang√©lique dans nos √¢mes",
    "dans l'espoir de voir fleurir la mis√©ricorde divine",
    "pour que r√©sonne la m√©lodie c√©leste dans nos pri√®res",
    "afin que s'√©panouisse la lumi√®re du Christ",
    "pour que s'ouvrent les chemins de la r√©conciliation",
    "afin que rayonnent les fruits de l'Esprit Saint",
    "en vue de cultiver les vertus th√©ologales dans nos communaut√©s",
    "dans l'attente de voir grandir la communion fraternelle",
    "pour que s'accomplisse la volont√© divine dans nos vies",
    "afin que se manifestent les signes du Royaume"
  ],

  closings: [
    "Concentrons-nous sur ce qui est beau et √©vang√©lique",
    "Tournons nos regards vers l'esp√©rance chr√©tienne plut√¥t que vers les pol√©miques",
    "Privil√©gions nos liturgies aux controverses m√©diatiques",
    "Pr√©f√©rons l'√©coute fraternelle aux clameurs st√©riles",
    "Choisissons le dialogue plut√¥t que les divisions",
    "Focalisons-nous sur notre mission d'√©vang√©lisation",
    "Orientons nos c≈ìurs vers la beaut√© de la foi",
    "Dirigeons notre attention vers les merveilles de la Cr√©ation plut√¥t que vers les divisions",
    "Favorisons la pri√®re contemplative aux d√©bats st√©riles",
    "Pr√©f√©rons la m√©ditation spirituelle aux pol√©miques destructrices",
    "Choisissons la charit√© chr√©tienne plut√¥t que les affrontements",
    "Concentrons-nous sur l'essentiel de notre vocation pastorale"
  ]
};

const bishopNames = [
  "Mgr Claude-Henri de Mis√©ricorde",
  "Mgr Adalbert de Contournement", 
  "Mgr S√©raphin du D√©tournement",
  "Mgr Boniface de l'Esquive",
  "Mgr Th√©ophile de la Langue-de-Bois",
  "Mgr Ambroise du Flou-Artistique",
  "Mgr Pac√¥me de l'√âvitement",
  "Mgr Chrysostome de la Diversion",
  "Mgr B√©n√©dict de l'√âvasion",
  "Mgr Anselme du D√©tournement-d'Attention"
];
---

<Layout title="Pipotron √âpiscopal">
  <div class="py-4">
    <!-- Title -->
    <h1 class="mb-6 text-4xl font-bold text-center">Pipotron √âpiscopal</h1>
    
    <!-- Barre de progression satirique -->
    <div id="progressBar" class="mb-6 mx-auto max-w-4xl hidden">
      <div class="bg-gray-200 rounded-full h-2 mb-2">
        <div id="progressFill" class="bg-yellow-600 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
      </div>
      <p id="progressText" class="text-center text-base font-medium text-yellow-600"></p>
    </div>
    
    <!-- Official Document Result Area -->
    <div class="mb-6 mx-auto max-w-4xl">
      <div class="bg-gray-100 text-black rounded-lg shadow-2xl border-4 border-gray-400 relative overflow-hidden">
        <!-- Official Header -->
        <div class="bg-gray-600 text-white p-6 text-center border-b-4 border-gray-400">
          <div class="flex items-center justify-center space-x-4">
            <div>
              <h2 class="text-xl font-bold">COMMUNIQU√â DE PRESSE</h2>
              <p class="text-sm opacity-90">Dioc√®se de Saint-Barbant</p>
            </div>
          </div>
        </div>
        
        <!-- Document Content -->
        <div class="p-8">
          <div id="result" class="min-h-32 flex items-center justify-center">
            <p class="text-gray-500 text-center italic">
              Cliquez sur "G√©n√©rer un nouveau" pour cr√©er un communiqu√© de mis√©ricorde
            </p>
          </div>
          
          <!-- Translation section -->
          <div id="translationSection" class="hidden mt-8 border-t-2 border-gray-300 pt-6">
            <h3 class="text-lg font-bold mb-4 text-gray-700">üîç Traduction en fran√ßais normal</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <h4 class="font-semibold text-gray-600 mb-2">Version officielle :</h4>
                <div id="originalText" class="text-sm text-gray-700 bg-gray-50 p-3 rounded"></div>
              </div>
              <div>
                <h4 class="font-semibold text-red-600 mb-2">Vraie signification :</h4>
                <div id="translatedText" class="text-sm text-red-700 bg-red-50 p-3 rounded"></div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Compteur de bullshit -->
        <div id="bullshitMeter" class="hidden bg-yellow-100 border-t-2 border-yellow-300 p-4">
          <div class="flex items-center justify-between">
            <span class="text-sm font-medium">Niveau de langue de bois :</span>
            <div id="bullshitStars" class="text-yellow-500"></div>
          </div>
        </div>
        
        <!-- Decorative corners -->
        <div class="absolute top-0 left-0 w-8 h-8 border-l-4 border-t-4 border-gray-400"></div>
        <div class="absolute top-0 right-0 w-8 h-8 border-r-4 border-t-4 border-gray-400"></div>
        <div class="absolute bottom-0 left-0 w-8 h-8 border-l-4 border-b-4 border-gray-400"></div>
        <div class="absolute bottom-0 right-0 w-8 h-8 border-r-4 border-b-4 border-gray-400"></div>
      </div>
    </div>

    <!-- Generate Button -->
    <div class="text-center mb-6">
      <button 
        id="generateBtn" 
        class="btn btn-lg bg-yellow-600 text-black hover:bg-yellow-700 font-semibold mr-4"
      >
        üôè G√©n√©rer un nouveau communiqu√© de mis√©ricorde
      </button>
      <button 
        id="translateBtn" 
        class="btn btn-lg bg-orange-500 text-white hover:bg-orange-600 font-semibold hidden"
      >
        üîç Traduire en fran√ßais normal
      </button>
    </div>

    <!-- Instructions -->
    <div class="mb-6 p-4 bg-white/5 rounded-lg border border-white/10">
      <p class="text-center text-white/90">
        Ou composez manuellement votre communiqu√© en s√©lectionnant dans les listes ci-dessous (dans l'ordre d'apparition)
      </p>
    </div>

    <!-- Word Lists Grid - Dans l'ordre d'apparition -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
      <!-- Incident -->
      <div class="bg-white/5 rounded-lg p-3 border border-white/10">
        <label class="block text-white font-medium mb-2 text-sm">üì∞ Incident (flou)</label>
        <select 
          id="incidents" 
          class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
          size="4"
        >
          <option value="">-- Choisir --</option>
          {wordLists.incidents.map(word => <option value={word}>{word}</option>)}
        </select>
      </div>

      <!-- Reconnaissance -->
      <div class="bg-white/5 rounded-lg p-3 border border-white/10">
        <label class="block text-white font-medium mb-2 text-sm">üòî Reconnaissance (partielle)</label>
        <select 
          id="acknowledgments" 
          class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
          size="4"
        >
          <option value="">-- Choisir --</option>
          {wordLists.acknowledgments.map(word => <option value={word}>{word}</option>)}
        </select>
      </div>

      <!-- Excuses -->
      <div class="bg-white/5 rounded-lg p-3 border border-white/10">
        <label class="block text-white font-medium mb-2 text-sm">üíî Excuses (rapides)</label>
        <select 
          id="apologies" 
          class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
          size="4"
        >
          <option value="">-- Choisir --</option>
          {wordLists.apologies.map(word => <option value={word}>{word}</option>)}
        </select>
      </div>

      <!-- Mis√©ricorde -->
      <div class="bg-white/5 rounded-lg p-3 border border-white/10">
        <label class="block text-white font-medium mb-2 text-sm">üôè Mis√©ricorde (s√©lective)</label>
        <select 
          id="misericorde" 
          class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
          size="4"
        >
          <option value="">-- Choisir --</option>
          {wordLists.misericorde.map(word => <option value={word}>{word}</option>)}
        </select>
      </div>

      <!-- Actions -->
      <div class="bg-white/5 rounded-lg p-3 border border-white/10">
        <label class="block text-white font-medium mb-2 text-sm">‚ö° Actions (vagues)</label>
        <select 
          id="actions" 
          class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
          size="4"
        >
          <option value="">-- Choisir --</option>
          {wordLists.actions.map(word => <option value={word}>{word}</option>)}
        </select>
      </div>

      <!-- Bons fruits -->
      <div class="bg-white/5 rounded-lg p-3 border border-white/10">
        <label class="block text-white font-medium mb-2 text-sm">üçá Bons fruits (obligatoires)</label>
        <select 
          id="goodFruits" 
          class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
          size="4"
        >
          <option value="">-- Choisir --</option>
          {wordLists.goodFruits.map(word => <option value={word}>{word}</option>)}
        </select>
      </div>

      <!-- Origine -->
      <div class="bg-white/5 rounded-lg p-3 border border-white/10">
        <label class="block text-white font-medium mb-2 text-sm">üîç Origine (d√©tourn√©e)</label>
        <select 
          id="originDeflection" 
          class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
          size="4"
        >
          <option value="">-- Choisir --</option>
          {wordLists.originDeflection.map(word => <option value={word}>{word}</option>)}
        </select>
      </div>

      <!-- Boucs √©missaires -->
      <div class="bg-white/5 rounded-lg p-3 border border-white/10">
        <label class="block text-white font-medium mb-2 text-sm">üéØ Boucs √©missaires (pratiques)</label>
        <select 
          id="scapegoats" 
          class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
          size="4"
        >
          <option value="">-- Choisir --</option>
          {wordLists.scapegoats.map(word => <option value={word}>{word}</option>)}
        </select>
      </div>

      <!-- Fins spirituelles -->
      <div class="bg-white/5 rounded-lg p-3 border border-white/10">
        <label class="block text-white font-medium mb-2 text-sm">‚ú® Fins spirituelles (creuses)</label>
        <select 
          id="spiritualEndings" 
          class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
          size="4"
        >
          <option value="">-- Choisir --</option>
          {wordLists.spiritualEndings.map(word => <option value={word}>{word}</option>)}
        </select>
      </div>

      <!-- Conclusion -->
      <div class="bg-white/5 rounded-lg p-3 border border-white/10">
        <label class="block text-white font-medium mb-2 text-sm">üå∏ Conclusion (d√©tournement)</label>
        <select 
          id="closings" 
          class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
          size="4"
        >
          <option value="">-- Choisir --</option>
          {wordLists.closings.map(word => <option value={word}>{word}</option>)}
        </select>
      </div>
    </div>

    <!-- Reset Button -->
    <div class="text-center mt-6">
      <button 
        id="resetBtn" 
        class="btn bg-white/10 text-white hover:bg-white/20"
      >
        üîÑ R√©initialiser
      </button>
    </div>
  </div>

  <script>
    const wordLists = {
      incidents: [
        "Suite aux r√©cents √©v√©nements qui ont touch√© notre communaut√© dioc√©saine",
        "Face aux difficult√©s pastorales que traverse notre dioc√®se en ces temps troubl√©s",
        "Concernant les situations port√©es √† notre attention",
        "√Ä la lumi√®re des t√©moignages qui nous sont parvenus",
        "Devant les d√©fis pastoraux auxquels nous sommes confront√©s",
        "En r√©ponse aux pr√©occupations exprim√©es par nos fid√®les",
        "Suite aux interrogations soulev√©es dans notre dioc√®se",
        "Face aux circonstances qui interpellent notre communaut√©",
        "Concernant les questions qui nous ont √©t√© rapport√©es",
        "√Ä la suite des √©v√©nements qui ont marqu√© notre famille dioc√©saine",
        "Devant les enjeux pastoraux de cette p√©riode d√©licate",
        "En r√©action aux inqui√©tudes exprim√©es"
      ],
      acknowledgments: [
        "nous reconnaissons que des dysfonctionnements ont pu survenir",
        "nous prenons acte des questionnements de notre communaut√©",
        "nous entendons les inqui√©tudes de nos paroissiens",
        "nous mesurons l'ampleur des interrogations suscit√©es",
        "nous sommes conscients des fragilit√©s de notre institution",
        "nous accueillons les interpellations qui nous sont adress√©es",
        "nous admettons que des manquements ont pu se produire",
        "nous comprenons les pr√©occupations de nos fid√®les",
        "nous entendons les questions l√©gitimes pos√©es",
        "nous reconnaissons les difficult√©s rencontr√©es",
        "nous sommes sensibles aux inqui√©tudes exprim√©es",
        "nous prenons la mesure des interrogations soulev√©es"
      ],
      apologies: [
        "manifestons notre proximit√© aux victimes et les encourageons √† aller de l'avant par le pardon",
        "t√©moignons notre compassion aux personnes troubl√©es et les invitons √† tourner la page dans la r√©conciliation",
        "exprimons notre soutien aux √¢mes √©branl√©es et les accompagnons pour avancer par la mis√©ricorde",
        "montrons notre solidarit√© aux personnes affect√©es et les encourageons √† passer √† autre chose dans le pardon",
        "manifestons notre compr√©hension aux victimes et les soutenons pour aller de l'avant par la r√©conciliation",
        "t√©moignons notre bienveillance aux personnes touch√©es et les invitons √† tourner la page dans la mis√©ricorde",
        "exprimons notre empathie aux victimes et les encourageons √† regarder vers l'avenir par le pardon",
        "montrons notre attention aux personnes √©prouv√©es et les accompagnons pour avancer dans la r√©conciliation",
        "manifestons notre fraternit√© aux victimes et les invitons √† aller de l'avant par la mis√©ricorde",
        "t√©moignons notre sollicitude aux √¢mes bless√©es et les encourageons √† tourner la page dans le pardon",
        "exprimons notre proximit√© aux personnes affect√©es et les soutenons pour passer √† autre chose par la r√©conciliation",
        "montrons notre compassion aux victimes et les accompagnons vers l'avenir dans la mis√©ricorde"
      ],
      misericorde: [
        "Rappelons que la mis√©ricorde divine s'√©tend √† tous, et doit guider notre discernement",
        "Le pardon √©vang√©lique concerne chaque membre de notre communaut√©, y compris les accus√©s",
        "La mis√©ricorde du Christ embrasse tous les enfants de Dieu sans exception",
        "La compassion divine rayonne sur chacun. La pr√©somption d'innocence demeure fondamentale",
        "Le pardon du Seigneur s'offre √† tous, m√™me aux plus fautifs d'entre nous",
        "M√©ditons sur la mis√©ricorde infinie qui unit tous nos fr√®res, victimes et coupables pr√©sum√©s, dans la charit√©"
      ],
      actions: [
        "Nous agissons fermement en mettant en place un processus d'√©valuation de nos pratiques",
        "Nous passons √† l'action en renfor√ßant nos dispositifs d'accompagnement spirituel",
        "Nous nous mobilisons r√©solument pour d√©velopper une d√©marche de discernement communautaire",
        "Nous prenons des mesures concr√®tes en instaurant des m√©canismes de dialogue renforc√©s",
        "Nous nous engageons activement √† consolider nos structures de formation pastorale",
        "Nous mettons tout en ≈ìuvre pour approfondir notre r√©flexion dans un esprit de synodalit√©"
      ],
      tourmentes: [
        "Dans la tourmente",
        "Au c≈ìur de la temp√™te",
        "En ces temps d'√©preuve",
        "Malgr√© les turbulences",
        "Dans cette p√©riode difficile",
        "Au sein de ces bouleversements",
        "Face √† l'adversit√©",
        "Dans ces moments troubl√©s",
        "Malgr√© les difficult√©s",
        "En d√©pit des √©preuves",
        "Dans ce contexte d√©licat",
        "Au milieu des d√©fis"
      ],
      goodFruits: [
        "il convient de ne pas occulter les fruits de gr√¢ce de nos paroisses",
        "nous devons garder √† l'esprit les t√©moignages de foi de notre dioc√®se",
        "il serait injuste d'ignorer les actions caritatives de nos communaut√©s",
        "nous ne saurions oublier les vocations qui confirment l'Esprit Saint",
        "rappelons-nous les signes d'esp√©rance de notre √âglise",
        "gardons pr√©sents les √©lans missionnaires qui nous dynamisent",
        "il importe de souligner les merveilles qui s'accomplissent dans nos paroisses",
        "nous devons reconna√Ætre les conversions authentiques de notre dioc√®se",
        "il serait dommage d'omettre les ≈ìuvres caritatives de nos fid√®les",
        "nous ne pouvons ignorer les gr√¢ces qui abondent dans nos communaut√©s",
        "rappelons les initiatives g√©n√©reuses qui fleurissent dans notre √âglise",
        "gardons en m√©moire les projets porteurs d'esp√©rance qui nous animent"
      ],
      originDeflection: [
        "sans nous leurrer sur l'origine de ces perturbations",
        "en gardant √† l'esprit les sources de ces troubles",
        "sans perdre de vue les ferments de division",
        "sans ignorer les v√©ritables causes de ces difficult√©s",
        "en identifiant clairement les racines de ces tensions",
        "sans oublier les influences qui alimentent ces pol√©miques"
      ],
      scapegoats: [
        "certains m√©dias en qu√™te de sensationnalisme",
        "des mouvements traditionalistes ferm√©s au souffle de l'Esprit",
        "des lobbies progressistes d√©connect√©s de la Tradition",
        "des r√©seaux occultes hostiles √† l'√âvangile",
        "des groupuscules anticl√©ricaux",
        "des influences s√©culi√®res cherchant √† saper notre rayonnement",
        "des organes de presse avides de pol√©miques",
        "des courants int√©gristes fig√©s dans leurs certitudes",
        "des factions modernistes √©trang√®res √† l'√âglise",
        "des cercles oppos√©s √† la mission √©vang√©lisatrice",
        "des militants nourris de pr√©jug√©s anti-religieux",
        "des forces s'acharnant √† ternir notre image"
      ],
      spiritualEndings: [
        "afin d'ouvrir des fen√™tres d'esp√©rance sur l'√©ternit√©",
        "pour que jaillissent des sources de gr√¢ce dans nos c≈ìurs",
        "en vue de faire germer la paix √©vang√©lique dans nos √¢mes",
        "dans l'espoir de voir fleurir la mis√©ricorde divine",
        "pour que r√©sonne la m√©lodie c√©leste dans nos pri√®res",
        "afin que s'√©panouisse la lumi√®re du Christ",
        "pour que s'ouvrent les chemins de la r√©conciliation",
        "afin que rayonnent les fruits de l'Esprit Saint",
        "en vue de cultiver les vertus th√©ologales dans nos communaut√©s",
        "dans l'attente de voir grandir la communion fraternelle",
        "pour que s'accomplisse la volont√© divine dans nos vies",
        "afin que se manifestent les signes du Royaume"
      ],
      closings: [
        "Concentrons-nous sur ce qui est beau et √©vang√©lique",
        "Tournons nos regards vers l'esp√©rance chr√©tienne plut√¥t que vers les pol√©miques",
        "Privil√©gions nos liturgies aux controverses m√©diatiques",
        "Pr√©f√©rons l'√©coute fraternelle aux clameurs st√©riles",
        "Choisissons le dialogue plut√¥t que les divisions",
        "Focalisons-nous sur notre mission d'√©vang√©lisation",
        "Orientons nos c≈ìurs vers la beaut√© de la foi",
        "Dirigeons notre attention vers les merveilles de la Cr√©ation plut√¥t que vers les divisions",
        "Favorisons la pri√®re contemplative aux d√©bats st√©riles",
        "Pr√©f√©rons la m√©ditation spirituelle aux pol√©miques destructrices",
        "Choisissons la charit√© chr√©tienne plut√¥t que les affrontements",
        "Concentrons-nous sur l'essentiel de notre vocation pastorale"
      ]
    };

    const bishopNames = [
      "Mgr Claude-Henri de Mis√©ricorde",
      "Mgr Adalbert de Contournement", 
      "Mgr S√©raphin du D√©tournement",
      "Mgr Boniface de l'Esquive",
      "Mgr Th√©ophile de la Langue-de-Bois",
      "Mgr Ambroise du Flou-Artistique",
      "Mgr Pac√¥me de l'√âvitement",
      "Mgr Chrysostome de la Diversion",
      "Mgr B√©n√©dict de l'√âvasion",
      "Mgr Anselme du D√©tournement-d'Attention"
    ];

    // Translations √©toff√©es
    const translations = {
      "nous reconnaissons que des dysfonctionnements ont pu survenir": "on s'est fait choper",
      "nous prenons acte des questionnements de notre communaut√©": "les gens r√¢lent",
      "nous entendons les inqui√©tudes de nos paroissiens": "√ßa gueule dans les paroisses",
      "nous mesurons l'ampleur des interrogations suscit√©es": "c'est la merde",
      "nous sommes conscients des fragilit√©s de notre institution": "on a merd√©",
      "nous accueillons les interpellations qui nous sont adress√©es": "on fait semblant d'√©couter",
      "nous admettons que des manquements ont pu se produire": "bon ok, on a foir√©",
      "nous comprenons les pr√©occupations de nos fid√®les": "on vous a entendus crier",
      "manifestons notre proximit√© aux victimes": "on fait semblant de compatir",
      "t√©moignons notre compassion aux personnes troubl√©es": "on dit qu'on est d√©sol√©s",
      "exprimons notre soutien aux √¢mes √©branl√©es": "on vous tapote l'√©paule",
      "montrons notre solidarit√© aux personnes affect√©es": "on fait genre qu'on comprend",
      "la mis√©ricorde divine s'√©tend √† tous": "on prot√®ge nos copains",
      "le pardon √©vang√©lique concerne chaque membre": "tout le monde pardonne, m√™me aux coupables",
      "la pr√©somption d'innocence demeure fondamentale": "ils sont innocents jusqu'√† preuve du contraire",
      "nous agissons fermement": "on ne fait rien de concret",
      "nous passons √† l'action": "on va r√©fl√©chir √† agir",
      "nous nous mobilisons r√©solument": "on va faire semblant",
      "nous prenons des mesures concr√®tes": "on va cr√©er une commission",
      "il convient de ne pas occulter les fruits de gr√¢ce": "regardez ailleurs",
      "nous devons garder √† l'esprit les t√©moignages de foi": "oubliez le scandale",
      "il serait injuste d'ignorer les actions caritatives": "on fait aussi du bien",
      "sans nous leurrer sur l'origine de ces perturbations": "c'est la faute des autres",
      "en gardant √† l'esprit les sources de ces troubles": "cherchez les vrais coupables",
      "sans perdre de vue les ferments de division": "c'est un complot",
      "certains m√©dias en qu√™te de sensationnalisme": "les journalistes nous emb√™tent",
      "des mouvements traditionalistes ferm√©s": "les cathos de droite nous cassent les pieds",
      "des lobbies progressistes d√©connect√©s": "les cathos de gauche nous emmerdent",
      "des r√©seaux occultes hostiles": "c'est la faute des francs-ma√ßons",
      "des groupuscules anticl√©ricaux": "les ath√©es nous d√©testent",
      "concentrons-nous sur ce qui est beau": "parlons d'autre chose",
      "tournons nos regards vers l'esp√©rance": "ignorez le probl√®me",
      "privil√©gions nos liturgies aux controverses": "la messe c'est plus important",
      "pr√©f√©rons l'√©coute fraternelle": "fermez-la et priez",
      "choisissons le dialogue plut√¥t que les divisions": "arr√™tez de nous emmerder",
      "focalisons-nous sur notre mission": "on a autre chose √† faire"
    };

    // Scores pour le calcul du bullshit
    const bullshitScores = {
      incidents: { base: 2, multiplier: 1 },
      acknowledgments: { base: 1, multiplier: 1 },
      apologies: { base: 3, multiplier: 1 },
      misericorde: { base: 4, multiplier: 1 },
      actions: { base: 5, multiplier: 1 },
      goodFruits: { base: 3, multiplier: 1 },
      originDeflection: { base: 4, multiplier: 1 },
      scapegoats: { base: 3, multiplier: 1 },
      spiritualEndings: { base: 2, multiplier: 1 },
      closings: { base: 3, multiplier: 1 }
    };

    function getRandomItem(array) {
      return array[Math.floor(Math.random() * array.length)];
    }

    function calculateBullshitLevel(selectedItems) {
      let totalScore = 0;
      
      // Calcul bas√© sur les √©l√©ments s√©lectionn√©s
      Object.keys(selectedItems).forEach(key => {
        if (bullshitScores[key] && selectedItems[key]) {
          totalScore += bullshitScores[key].base;
        }
      });
      
      // Bonus pour certaines combinaisons
      if (selectedItems.misericorde && selectedItems.scapegoats) totalScore += 2;
      if (selectedItems.goodFruits && selectedItems.originDeflection) totalScore += 2;
      if (selectedItems.actions && selectedItems.spiritualEndings) totalScore += 1;
      
      // Assurer que le niveau soit entre 6 et 10
      const level = Math.min(Math.max(totalScore, 6), 10);
      return level;
    }

    function showBullshitMeter(level) {
      const meter = document.getElementById('bullshitMeter');
      const stars = document.getElementById('bullshitStars');
      stars.innerHTML = '‚òÖ'.repeat(level) + '‚òÜ'.repeat(10-level);
      meter.classList.remove('hidden');
    }

    function showProgressBar() {
      const progressBar = document.getElementById('progressBar');
      const progressFill = document.getElementById('progressFill');
      const progressText = document.getElementById('progressText');
      
      progressBar.classList.remove('hidden');
      
      const steps = [
        { width: 20, text: "Recherche d'excuses..." },
        { width: 40, text: "Identification des boucs √©missaires..." },
        { width: 60, text: "Application de la mis√©ricorde s√©lective..." },
        { width: 80, text: "D√©tournement d'attention en cours..." },
        { width: 100, text: "Langue de bois optimis√©e !" }
      ];
      
      let currentStep = 0;
      const interval = setInterval(() => {
        if (currentStep < steps.length) {
          progressFill.style.width = steps[currentStep].width + '%';
          progressText.textContent = steps[currentStep].text;
          currentStep++;
        } else {
          clearInterval(interval);
          setTimeout(() => {
            progressBar.classList.add('hidden');
          }, 1000);
        }
      }, 400);
    }

    let currentCommunique = '';
    let currentSelectedItems = {};

    function generateCommunique() {
      showProgressBar();
      
      setTimeout(() => {
        const selectedItems = {
          incidents: getRandomItem(wordLists.incidents),
          acknowledgments: getRandomItem(wordLists.acknowledgments),
          apologies: getRandomItem(wordLists.apologies),
          misericorde: getRandomItem(wordLists.misericorde),
          actions: getRandomItem(wordLists.actions),
          tourmentes: getRandomItem(wordLists.tourmentes),
          goodFruits: getRandomItem(wordLists.goodFruits),
          originDeflection: getRandomItem(wordLists.originDeflection),
          scapegoats: getRandomItem(wordLists.scapegoats),
          spiritualEndings: getRandomItem(wordLists.spiritualEndings),
          closings: getRandomItem(wordLists.closings)
        };
        
        currentSelectedItems = selectedItems;
        const bishop = getRandomItem(bishopNames);

        const communique = `${selectedItems.incidents}, ${selectedItems.acknowledgments}. En ces temps troubl√©s, ${selectedItems.apologies}. ${selectedItems.misericorde}.

${selectedItems.actions} ${selectedItems.spiritualEndings}.

${selectedItems.tourmentes}, ${selectedItems.goodFruits}. Il importe √©galement, ${selectedItems.originDeflection}, de ne pas c√©der aux man≈ìuvres de ${selectedItems.scapegoats}.

${selectedItems.closings}.`;
        
        currentCommunique = communique;
        
        const bullshitLevel = calculateBullshitLevel(selectedItems);
        
        document.getElementById('result').innerHTML = `
          <div class="text-left">
            <p class="text-base font-medium text-gray-800 leading-relaxed mb-6 whitespace-pre-line">${communique}</p>
            <div class="text-right text-sm text-gray-600 italic mt-4">
              <p>+ ${bishop}</p>
              <p>√âv√™que de Saint-Barbant</p>
            </div>
          </div>
        `;
        
        showBullshitMeter(bullshitLevel);
        document.getElementById('translateBtn').classList.remove('hidden');
        document.getElementById('translationSection').classList.add('hidden');
      }, 2000);
    }

    document.getElementById('generateBtn').addEventListener('click', generateCommunique);

    document.getElementById('translateBtn').addEventListener('click', function() {
      const translationSection = document.getElementById('translationSection');
      const originalText = document.getElementById('originalText');
      const translatedText = document.getElementById('translatedText');
      
      let originalParts = [];
      let translatedParts = [];
      
      // Chercher les traductions dans le texte
      Object.keys(translations).forEach(key => {
        if (currentCommunique.includes(key)) {
          originalParts.push(key);
          translatedParts.push(translations[key]);
        }
      });
      
      // Afficher les traductions trouv√©es
      originalText.innerHTML = originalParts.map(part => `<p class="mb-2">"${part}"</p>`).join('');
      translatedText.innerHTML = translatedParts.map(part => `<p class="mb-2">"${part}"</p>`).join('');
      
      translationSection.classList.remove('hidden');
    });

    document.getElementById('resetBtn').addEventListener('click', function() {
      const selects = document.querySelectorAll('select');
      selects.forEach(select => {
        select.selectedIndex = 0;
      });
      document.getElementById('result').innerHTML = `<p class="text-gray-500 text-center italic">Cliquez sur "G√©n√©rer un nouveau" pour cr√©er un communiqu√© de mis√©ricorde</p>`;
      document.getElementById('bullshitMeter').classList.add('hidden');
      document.getElementById('translateBtn').classList.add('hidden');
      document.getElementById('translationSection').classList.add('hidden');
      currentCommunique = '';
      currentSelectedItems = {};
    });

    const selects = document.querySelectorAll('select');
    selects.forEach(select => {
      select.addEventListener('change', function() {
        updateManualCommunique();
      });
    });

    function updateManualCommunique() {
      const selectedValues = {};
      selects.forEach(select => {
        if (select.value) {
          selectedValues[select.id] = select.value;
        }
      });

      if (Object.keys(selectedValues).length > 0) {
        let communique = "";
        
        // Premier paragraphe : incident + acknowledgment + apology + misericorde
        if (selectedValues.incidents) communique += selectedValues.incidents;
        if (selectedValues.acknowledgments) communique += `, ${selectedValues.acknowledgments}.`;
        if (selectedValues.apologies) communique += ` En ces temps troubl√©s, ${selectedValues.apologies}.`;
        if (selectedValues.misericorde) communique += ` ${selectedValues.misericorde}.`;

        // Deuxi√®me paragraphe : actions
        if (selectedValues.actions) {
          communique += `\n\n${selectedValues.actions}`;
          if (selectedValues.spiritualEndings) communique += ` ${selectedValues.spiritualEndings}.`;
        }

        // Troisi√®me paragraphe : goodFruits + originDeflection + scapegoats
        if (selectedValues.goodFruits) communique += `\n\nDans la tourmente, ${selectedValues.goodFruits}.`;
        if (selectedValues.originDeflection || selectedValues.scapegoats) {
          communique += " Il importe √©galement, ";
          if (selectedValues.originDeflection) communique += selectedValues.originDeflection + ", ";
          if (selectedValues.scapegoats) communique += `de ne pas c√©der aux man≈ìuvres de ${selectedValues.scapegoats}.`;
        }

        // Quatri√®me paragraphe : closing
        if (selectedValues.closings) communique += `\n\n${selectedValues.closings}.`;

        if (communique.trim()) {
          currentCommunique = communique;
          currentSelectedItems = selectedValues;
          const bishop = getRandomItem(bishopNames);
          const bullshitLevel = calculateBullshitLevel(selectedValues);
          
          document.getElementById('result').innerHTML = `
            <div class="text-left">
              <p class="text-base font-medium text-gray-800 leading-relaxed mb-6 whitespace-pre-line">${communique}</p>
              <div class="text-right text-sm text-gray-600 italic mt-4">
                <p>+ ${bishop}</p>
                <p>√âv√™que de Saint-Barbant</p>
              </div>
            </div>
          `;
          
          showBullshitMeter(bullshitLevel);
          document.getElementById('translateBtn').classList.remove('hidden');
          document.getElementById('translationSection').classList.add('hidden');
        }
      }
    }
  </script>
</Layout>
