---
import Layout from '../layouts/Layout.astro';

const wordLists = {
  // Vague incident starters (doublé)
  incidents: [
    "Suite aux récents événements qui ont touché notre communauté diocésaine",
    "Face aux difficultés pastorales que traverse notre diocèse en ces temps troublés",
    "Concernant les situations portées à notre attention",
    "À la lumière des témoignages qui nous sont parvenus",
    "Devant les défis pastoraux auxquels nous sommes confrontés",
    "En réponse aux préoccupations exprimées par nos fidèles",
    "Suite aux interrogations soulevées dans notre diocèse",
    "Face aux circonstances qui interpellent notre communauté",
    "Concernant les questions qui nous ont été rapportées",
    "À la suite des événements qui ont marqué notre famille diocésaine",
    "Devant les enjeux pastoraux de cette période délicate",
    "En réaction aux inquiétudes exprimées"
  ],

  // Vague acknowledgments (doublé et plus court)
  acknowledgments: [
    "nous reconnaissons que des dysfonctionnements ont pu survenir",
    "nous prenons acte des questionnements de notre communauté",
    "nous entendons les inquiétudes de nos paroissiens",
    "nous mesurons l'ampleur des interrogations suscitées",
    "nous sommes conscients des fragilités de notre institution",
    "nous accueillons les interpellations qui nous sont adressées",
    "nous admettons que des manquements ont pu se produire",
    "nous comprenons les préoccupations de nos fidèles",
    "nous entendons les questions légitimes posées",
    "nous reconnaissons les difficultés rencontrées",
    "nous sommes sensibles aux inquiétudes exprimées",
    "nous prenons la mesure des interrogations soulevées"
  ],

apologies: [
  "manifestons notre proximité aux victimes et les encourageons à aller de l'avant par le pardon",
  "témoignons notre compassion aux personnes troublées et les invitons à tourner la page dans la réconciliation",
  "exprimons notre soutien aux âmes ébranlées et les accompagnons pour avancer par la miséricorde",
  "montrons notre solidarité aux personnes affectées et les encourageons à passer à autre chose dans le pardon",
  "manifestons notre compréhension aux victimes et les soutenons pour aller de l'avant par la réconciliation",
  "témoignons notre bienveillance aux personnes touchées et les invitons à tourner la page dans la miséricorde",
  "exprimons notre empathie aux victimes et les encourageons à regarder vers l'avenir par le pardon",
  "montrons notre attention aux personnes éprouvées et les accompagnons pour avancer dans la réconciliation",
  "manifestons notre fraternité aux victimes et les invitons à aller de l'avant par la miséricorde",
  "témoignons notre sollicitude aux âmes blessées et les encourageons à tourner la page dans le pardon",
  "exprimons notre proximité aux personnes affectées et les soutenons pour passer à autre chose par la réconciliation",
  "montrons notre compassion aux victimes et les accompagnons vers l'avenir dans la miséricorde"
]
  // Miséricorde (phrases plus courtes, pardon/miséricorde pour les coupables)
  misericorde: [
    "Rappelons que la miséricorde divine s'étend à tous, et doit guider notre discernement",
    "Le pardon évangélique concerne chaque membre de notre communauté, y compris les accusés",
    "La miséricorde du Christ embrasse tous les enfants de Dieu sans exception",
    "La compassion divine rayonne sur chacun. La présomption d'innocence demeure fondamentale",
    "Le pardon du Seigneur s'offre à tous, même aux plus fautifs d'entre nous",
    "Méditons sur la miséricorde infinie qui unit tous nos frères, victimes et coupables présumés, dans la charité"
  ],

  // "Dans la tourmente" transitions (doublé)
  tourmentes: [
    "Dans la tourmente",
    "Au cœur de la tempête",
    "En ces temps d'épreuve",
    "Malgré les turbulences",
    "Dans cette période difficile",
    "Au sein de ces bouleversements",
    "Face à l'adversité",
    "Dans ces moments troublés",
    "Malgré les difficultés",
    "En dépit des épreuves",
    "Dans ce contexte délicat",
    "Au milieu des défis"
  ],

  // Good fruits deflection (doublé)
  goodFruits: [
    "il convient de ne pas occulter les fruits de grâce de nos paroisses",
    "nous devons garder à l'esprit les témoignages de foi de notre diocèse",
    "il serait injuste d'ignorer les actions caritatives de nos communautés",
    "nous ne saurions oublier les vocations qui confirment l'Esprit Saint",
    "rappelons-nous les signes d'espérance de notre Église",
    "gardons présents les élans missionnaires qui nous dynamisent",
    "il importe de souligner les merveilles qui s'accomplissent dans nos paroisses",
    "nous devons reconnaître les conversions authentiques de notre diocèse",
    "il serait dommage d'omettre les œuvres caritatives de nos fidèles",
    "nous ne pouvons ignorer les grâces qui abondent dans nos communautés",
    "rappelons les initiatives généreuses qui fleurissent dans notre Église",
    "gardons en mémoire les projets porteurs d'espérance qui nous animent"
  ],

  // Origin deflection (doublé)
  originDeflection: [
    "sans nous leurrer sur l'origine de ces perturbations",
    "en gardant à l'esprit les sources de ces troubles",
    "sans perdre de vue les ferments de division",
    "sans ignorer les véritables causes de ces difficultés",
    "en identifiant clairement les racines de ces tensions",
    "sans oublier les influences qui alimentent ces polémiques"
  ],

  // Scapegoats (doublé)
  scapegoats: [
    "certains médias en quête de sensationnalisme",
    "des mouvements traditionalistes fermés au souffle de l'Esprit",
    "des lobbies progressistes déconnectés de la Tradition",
    "des réseaux occultes hostiles à l'Évangile",
    "des groupuscules anticléricaux",
    "des influences séculières cherchant à saper notre rayonnement",
    "des organes de presse avides de polémiques",
    "des courants intégristes figés dans leurs certitudes",
    "des factions modernistes étrangères àl'Église",
    "des cercles opposés à la mission évangélisatrice",
    "des militants nourris de préjugés anti-religieux",
    "des forces s'acharnant à ternir notre image"
  ],

  // Langue de bois responses (doublé)
  responses: [
    "dans un esprit de dialogue constructif",
    "en nous appuyant sur les valeurs qui nous guident",
    "avec le souci de l'unité de notre Église",
    "dans une démarche de vérité et de réconciliation",
    "en privilégiant l'écoute bienveillante",
    "dans le respect de la dignité de chaque personne",
    "dans une approche pastorale empreinte de charité",
    "en nous fondant sur les enseignements de l'Église",
    "avec la volonté de servir l'unité",
    "dans un souci de fraternité et de pardon",
    "en favorisant l'accompagnement personnalisé et la miséricorde",
    "dans l'esprit de communion qui caractérise notre foi chrétienne"
  ],

  // Actions (doublé)
  actions: [
    "nous nous engageons à approfondir notre réflexion dans un esprit de synodalité",
    "nous mettons en place un processus d'évaluation de nos pratiques pastorales",
    "nous renforçons nos dispositifs d'accompagnement spirituel du clergé",
    "nous nous attachons à développer une démarche de discernement communautaire",
    "nous instaurons des mécanismes de dialogue et de concertation renforcés",
    "nous consolidons nos structures de formation et d'accompagnement pastoral"
  ],

  // Spiritual endings (doublé)
  spiritualEndings: [
    "afin d'ouvrir des fenêtres d'espérance sur l'éternité",
    "pour que jaillissent des sources de grâce dans nos cœurs",
    "en vue de faire germer la paix évangélique dans nos âmes",
    "dans l'espoir de voir fleurir la miséricorde divine",
    "pour que résonne la mélodie céleste dans nos prières",
    "afin que s'épanouisse la lumière du Christ",
    "pour que s'ouvrent les chemins de la réconciliation",
    "afin que rayonnent les fruits de l'Esprit Saint",
    "en vue de cultiver les vertus théologales dans nos communautés",
    "dans l'attente de voir grandir la communion fraternelle",
    "pour que s'accomplisse la volonté divine dans nos vies",
    "afin que se manifestent les signes du Royaume"
  ],

  // Bullshitty closings (doublé)
  closings: [
    "Concentrons-nous sur ce qui est beau et évangélique",
    "Tournons nos regards vers l'espérance chrétienne plutôt que vers les polémiques",
    "Privilégions nos liturgies aux controverses médiatiques",
    "Préférons l'écoute fraternelle aux clameurs stériles",
    "Choisissons le dialogue plutôt que les divisions",
    "Focalisons-nous sur notre mission d'évangélisation",
    "Orientons nos cœurs vers la beauté de la foi",
    "Dirigeons notre attention vers les merveilles de la Création plutôt que vers les divisions",
    "Favorisons la prière contemplative aux débats stériles",
    "Préférons la méditation spirituelle aux polémiques destructrices",
    "Choisissons la charité chrétienne plutôt que les affrontements",
    "Concentrons-nous sur l'essentiel de notre vocation pastorale"
  ]
};
---

<Layout title="Pipotron Épiscopal">
  <div class="py-4">
    <!-- Title -->
    <h1 class="mb-6 text-4xl font-bold text-center">Pipotron Épiscopal</h1>
    
    <!-- Official Document Result Area -->
    <div class="mb-6 mx-auto max-w-4xl">
      <div class="bg-white text-black rounded-lg shadow-2xl border-4 border-yellow-600 relative overflow-hidden">
        <!-- Official Header -->
        <div class="bg-gradient-to-r from-purple-900 to-blue-900 text-white p-6 text-center border-b-4 border-yellow-600">
          <div class="flex items-center justify-center space-x-4">
            <div class="w-12 h-12 bg-yellow-600 rounded-full flex items-center justify-center">
              <span class="text-2xl">✚</span>
            </div>
            <div>
              <h2 class="text-xl font-bold">COMMUNIQUÉ DE PRESSE</h2>
              <p class="text-sm opacity-90">Diocèse de Saint-Barbant</p>
            </div>
            <div class="w-12 h-12 bg-yellow-600 rounded-full flex items-center justify-center">
              <span class="text-2xl">✚</span>
            </div>
          </div>
        </div>
        
        <!-- Document Content -->
        <div class="p-8">
          <div id="result" class="min-h-32 flex items-center justify-center">
            <p class="text-gray-500 text-center italic">
              Cliquez sur "Générer un nouveau" pour créer un communiqué de miséricorde
            </p>
          </div>
        </div>
        
        <!-- Decorative corners -->
        <div class="absolute top-0 left-0 w-8 h-8 border-l-4 border-t-4 border-yellow-600"></div>
        <div class="absolute top-0 right-0 w-8 h-8 border-r-4 border-t-4 border-yellow-600"></div>
        <div class="absolute bottom-0 left-0 w-8 h-8 border-l-4 border-b-4 border-yellow-600"></div>
        <div class="absolute bottom-0 right-0 w-8 h-8 border-r-4 border-b-4 border-yellow-600"></div>
      </div>
    </div>

    <!-- Generate Button -->
    <div class="text-center mb-6">
      <button 
        id="generateBtn" 
        class="btn btn-lg bg-yellow-600 text-black hover:bg-yellow-700 font-semibold"
      >
        🙏 Générer un nouveau communiqué de miséricorde
      </button>
    </div>

    <!-- Instructions -->
    <div class="mb-6 p-4 bg-white/5 rounded-lg border border-white/10">
      <p class="text-center text-white/90">
        Ou composez manuellement votre communiqué en sélectionnant dans les listes ci-dessous
      </p>
    </div>

    <!-- Word Lists Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3">
      <!-- Column 1 -->
      <div class="space-y-3">
        <div class="bg-white/5 rounded-lg p-3 border border-white/10">
          <label class="block text-white font-medium mb-2 text-sm">📰 Incident</label>
          <select 
            id="incidents" 
            class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
            size="4"
          >
            <option value="">-- Choisir --</option>
            {wordLists.incidents.map(word => <option value={word}>{word}</option>)}
          </select>
        </div>
        
        <div class="bg-white/5 rounded-lg p-3 border border-white/10">
          <label class="block text-white font-medium mb-2 text-sm">🍇 Bons fruits</label>
          <select 
            id="goodFruits" 
            class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
            size="4"
          >
            <option value="">-- Choisir --</option>
            {wordLists.goodFruits.map(word => <option value={word}>{word}</option>)}
          </select>
        </div>
      </div>

      <!-- Column 2 -->
      <div class="space-y-3">
        <div class="bg-white/5 rounded-lg p-3 border border-white/10">
          <label class="block text-white font-medium mb-2 text-sm">😔 Reconnaissance</label>
          <select 
            id="acknowledgments" 
            class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
            size="4"
          >
            <option value="">-- Choisir --</option>
            {wordLists.acknowledgments.map(word => <option value={word}>{word}</option>)}
          </select>
        </div>
        
        <div class="bg-white/5 rounded-lg p-3 border border-white/10">
          <label class="block text-white font-medium mb-2 text-sm">🔍 Origine</label>
          <select 
            id="originDeflection" 
            class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
            size="4"
          >
            <option value="">-- Choisir --</option>
            {wordLists.originDeflection.map(word => <option value={word}>{word}</option>)}
          </select>
        </div>
      </div>

      <!-- Column 3 -->
      <div class="space-y-3">
        <div class="bg-white/5 rounded-lg p-3 border border-white/10">
          <label class="block text-white font-medium mb-2 text-sm">💔 Excuses</label>
          <select 
            id="apologies" 
            class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
            size="4"
          >
            <option value="">-- Choisir --</option>
            {wordLists.apologies.map(word => <option value={word}>{word}</option>)}
          </select>
        </div>
        
        <div class="bg-white/5 rounded-lg p-3 border border-white/10">
          <label class="block text-white font-medium mb-2 text-sm">🎯 Boucs émissaires</label>
          <select 
            id="scapegoats" 
            class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
            size="4"
          >
            <option value="">-- Choisir --</option>
            {wordLists.scapegoats.map(word => <option value={word}>{word}</option>)}
          </select>
        </div>
      </div>

      <!-- Column 4 -->
      <div class="space-y-3">
        <div class="bg-white/5 rounded-lg p-3 border border-white/10">
          <label class="block text-white font-medium mb-2 text-sm">🙏 Miséricorde</label>
          <select 
            id="misericorde" 
            class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
            size="4"
          >
            <option value="">-- Choisir --</option>
            {wordLists.misericorde.map(word => <option value={word}>{word}</option>)}
          </select>
        </div>
        
        <div class="bg-white/5 rounded-lg p-3 border border-white/10">
          <label class="block text-white font-medium mb-2 text-sm">🌸 Conclusion</label>
          <select 
            id="closings" 
            class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
            size="4"
          >
            <option value="">-- Choisir --</option>
            {wordLists.closings.map(word => <option value={word}>{word}</option>)}
          </select>
        </div>
      </div>
    </div>

    <!-- Reset Button -->
    <div class="text-center mt-6">
      <button 
        id="resetBtn" 
        class="btn bg-white/10 text-white hover:bg-white/20"
      >
        🔄 Réinitialiser
      </button>
    </div>
  </div>

  <script>
    const wordLists = {
      incidents: [
        "Suite aux récents événements particulièrement douloureux qui ont touché notre communauté diocésaine et suscité de légitimes interrogations",
        "Face aux difficultés pastorales complexes que traverse actuellement notre diocèse dans un contexte sociétal en pleine mutation",
        "Concernant les situations délicates et sensibles portées à notre attention par différents canaux d'information",
        "À la lumière des témoignages poignants qui nous sont parvenus et qui méritent toute notre attention bienveillante",
        "Devant les défis pastoraux considérables auxquels nous sommes confrontés en ces temps troublés",
        "En réponse aux préoccupations légitimes et compréhensibles exprimées par nos fidèles les plus attentifs"
      ],
      acknowledgments: [
        "nous reconnaissons avec humilité et contrition que des dysfonctionnements regrettables ont pu survenir dans notre organisation pastorale",
        "nous prenons acte avec gravité des questionnements profonds soulevés par certains membres éminents de notre communauté",
        "nous entendons avec compassion les inquiétudes légitimes exprimées par nos paroissiens les plus fidèles et dévoués",
        "nous mesurons pleinement l'ampleur des interrogations suscitées par ces événements dans l'opinion publique",
        "nous sommes parfaitement conscients des fragilités humaines qui ont pu se manifester dans notre institution",
        "nous accueillons avec le plus grand sérieux les interpellations constructives qui nous sont adressées"
      ],
      apologies: [
        "nous exprimons notre profonde compassion envers toutes les personnes qui ont pu être choquées par ces révélations et encourageons chacun à aller de l'avant dans un esprit de réconciliation",
        "nous manifestons notre sincère empathie à l'égard de ceux qui ont été troublés par ces événements et les invitons à cheminer vers la guérison spirituelle",
        "nous témoignons de notre solidarité fraternelle envers les âmes sensibles qui ont été ébranlées et les accompagnons dans leur démarche d'aller de l'avant",
        "nous exprimons notre proximité bienveillante avec tous ceux qui ont été affectés et les encourageons à poursuivre leur marche vers la paix intérieure",
        "nous manifestons notre compréhension pastorale envers les personnes qui ont été interpellées et les soutenons dans leur désir d'aller de l'avant constructivement",
        "nous témoignons de notre sollicitude particulière envers ceux qui ont été touchés et les accompagnons dans leur cheminement vers la sérénité"
      ],
      misericorde: [
        "Rappelons que la miséricorde divine s'étend à tous sans exception, y compris à ceux qui se trouvent aujourd'hui sous les projecteurs médiatiques, et que le principe fondamental de présomption d'innocence doit guider notre discernement",
        "Gardons à l'esprit que la compassion évangélique concerne chaque membre de notre communauté, notamment ceux qui font l'objet d'accusations, et que la présomption d'innocence constitue un pilier de notre justice",
        "Souvenons-nous que la miséricorde du Christ embrasse tous les enfants de Dieu, particulièrement ceux qui sont actuellement dans l'épreuve médiatique, et que la présomption d'innocence demeure un principe incontournable",
        "N'oublions pas que la grâce divine rayonne sur chacun, y compris sur ceux qui traversent actuellement des moments difficiles, et que la présomption d'innocence reste un fondement de notre approche pastorale",
        "Retenons que la bonté divine s'étend à tous nos frères, spécialement à ceux qui sont aujourd'hui exposés publiquement, et que la présomption d'innocence constitue un préalable à tout jugement équitable",
        "Méditons sur le fait que la tendresse du Seigneur concerne chaque personne, notamment celles qui sont actuellement sous le feu des critiques, et que la présomption d'innocence guide notre démarche de vérité"
      ],
      tourmentes: [
        "Dans la tourmente",
        "Au cœur de la tempête",
        "En ces temps d'épreuve",
        "Malgré les turbulences",
        "Dans cette période difficile",
        "Au sein de ces bouleversements"
      ],
      goodFruits: [
        "il convient néanmoins de ne pas occulter les nombreux fruits de grâce extraordinaires qui jaillissent quotidiennement dans nos paroisses et témoignent de la vitalité de notre foi",
        "nous devons impérativement garder à l'esprit les merveilleux témoignages de foi authentique qui illuminent notre diocèse et réchauffent nos cœurs",
        "il serait profondément injuste d'ignorer les multiples actions caritatives remarquables qui rayonnent dans nos communautés et honorent l'Évangile",
        "nous ne saurions oublier les vocations florissantes et les conversions authentiques qui nous réjouissent et confirment l'action de l'Esprit Saint",
        "rappelons-nous avec gratitude les signes d'espérance manifestes qui bourgeonnent dans le terreau fertile de notre Église locale",
        "gardons présents à l'esprit les élans missionnaires enthousiastes qui dynamisent notre pastorale et ouvrent des horizons nouveaux"
      ],
      originDeflection: [
        "sans nous leurrer sur l'origine véritable de ces perturbations qui trouvent leurs racines dans des oppositions idéologiques bien connues",
        "en gardant lucidement à l'esprit les véritables sources de ces troubles qui s'enracinent dans des conflits d'intérêts manifestes",
        "sans perdre de vue les racines profondes de ces difficultés qui puisent dans des antagonismes anciens et persistants",
        "en identifiant clairement les ferments de division pernicieux qui nous assaillent et cherchent à ébranler notre unité",
        "sans ignorer les forces centrifuges organisées qui cherchent méthodiquement à déstabiliser notre communion fraternelle",
        "en discernant avec sagesse les influences délétères extérieures qui s'exercent insidieusement sur notre communauté"
      ],
      scapegoats: [
        "certains médias en quête permanente de sensationnalisme et particulièrement prompts à la désinformation systématique",
        "des mouvements traditionalistes nostalgiques d'un passé idéalisé et hermétiquement fermés au souffle renouvelant de l'Esprit",
        "des lobbies progressistes radicalement déconnectés de la Tradition vivante et authentique de notre sainte Église",
        "des réseaux maçonniques historiquement hostiles à l'influence bénéfique et civilisatrice de l'Évangile dans la société",
        "des groupuscules anticléricaux viscéralement animés par une idéologie fondamentalement hostile à la foi chrétienne",
        "des influences séculières organisées cherchant systématiquement à saper l'autorité légitime et le rayonnement de l'Église"
      ],
      responses: [
        "dans un esprit de dialogue constructif, de discernement pastoral approfondi et de recherche commune de la vérité",
        "en nous appuyant fermement sur les valeurs évangéliques intemporelles qui nous guident dans toutes nos démarches",
        "avec le souci constant et prioritaire du bien commun et de l'unité indéfectible de notre sainte Église",
        "dans une démarche exigeante de vérité, de justice et de réconciliation authentique avec tous nos frères",
        "en privilégiant systématiquement l'écoute bienveillante et l'accompagnement personnalisé de chaque personne concernée",
        "dans le respect absolu de la dignité inaliénable de chaque personne humaine créée à l'image de Dieu"
      ],
      actions: [
        "nous nous engageons solennellement à approfondir notre réflexion collégiale dans un esprit de synodalité renouvelée",
        "nous mettons résolument en place un processus rigoureux d'évaluation et d'amélioration continue de nos pratiques pastorales",
        "nous renforçons considérablement nos dispositifs d'accompagnement spirituel et de formation permanente du clergé",
        "nous développons méthodiquement une approche plus collaborative, transparente et participative de la gouvernance diocésaine",
        "nous intensifions significativement notre travail de prévention et de sensibilisation auprès de toutes nos communautés",
        "nous consolidons durablement nos structures d'écoute, de médiation et d'accompagnement des personnes en difficulté"
      ],
      spiritualEndings: [
        "afin d'ouvrir toujours plus largement des fenêtres d'espérance lumineuses sur des vallées d'éternité bienheureuse",
        "pour que jaillissent abondamment des sources de grâce purificatrices dans nos cœurs meurtris mais confiants",
        "en vue de faire germer patiemment des semences de paix évangélique dans le jardin secret de nos âmes",
        "dans l'espoir ferme de voir fleurir magnifiquement la miséricorde divine dans toutes nos communautés paroissiales",
        "pour que résonne harmonieusement la mélodie céleste dans le silence fécond de nos prières communes",
        "afin que s'épanouisse pleinement la lumière rédemptrice du Christ dans les ténèbres passagères de nos épreuves"
      ],
      closings: [
        "Concentrons-nous résolument sur ce qui est beau et authentiquement évangélique et élevons nos cœurs vers les sphères supérieures de la contemplation mystique",
        "Focalisons-nous prioritairement sur les merveilles ineffables de la Création divine et laissons donc les fanges boueuses à ceux qui aiment s'y complaire",
        "Tournons nos regards confiants vers les horizons lumineux de l'espérance chrétienne plutôt que vers les marécages stériles de la polémique",
        "Privilégions la beauté transcendante des liturgies solennelles aux cacophonies discordantes des controverses médiatiques stériles",
        "Préférons les chants grégoriens millénaires aux clameurs médiatiques éphémères qui troublent la sérénité de nos âmes",
        "Choisissons les parfums sacrés de l'encens aux miasmes empoisonnés de la calomnie qui polluent l'atmosphère spirituelle"
      ]
    };

    function getRandomItem(array) {
      return array[Math.floor(Math.random() * array.length)];
    }

    function generateCommunique() {
      const incident = getRandomItem(wordLists.incidents);
      const acknowledgment = getRandomItem(wordLists.acknowledgments);
      const apology = getRandomItem(wordLists.apologies);
      const misericorde = getRandomItem(wordLists.misericorde);
      const tourmente = getRandomItem(wordLists.tourmentes);
      const goodFruit = getRandomItem(wordLists.goodFruits);
      const originDeflection = getRandomItem(wordLists.originDeflection);
      const scapegoat = getRandomItem(wordLists.scapegoats);
      const response = getRandomItem(wordLists.responses);
      const action = getRandomItem(wordLists.actions);
      const spiritualEnding = getRandomItem(wordLists.spiritualEndings);
      const closing = getRandomItem(wordLists.closings);

      const communique = `${incident}, ${acknowledgment}.

Dans ce contexte, ${apology}. ${misericorde}.

${tourmente}, ${goodFruit}. Il importe également, ${originDeflection}, de ne pas céder aux manœuvres ${scapegoat}.

C'est pourquoi, ${response}, ${action} ${spiritualEnding}.

${closing}.`;
      
      return communique;
    }

    document.getElementById('generateBtn').addEventListener('click', function() {
      const communique = generateCommunique();
      document.getElementById('result').innerHTML = `
        <div class="text-left">
          <p class="text-base font-medium text-gray-800 leading-relaxed mb-6 whitespace-pre-line">${communique}</p>
          <div class="text-right text-sm text-gray-600 italic mt-4">
            <p>+ Monseigneur Claude-Henri de Miséricorde</p>
            <p>Évêque de Saint-Barbant</p>
          </div>
        </div>
      `;
    });

    document.getElementById('resetBtn').addEventListener('click', function() {
      const selects = document.querySelectorAll('select');
      selects.forEach(select => {
        select.selectedIndex = 0;
      });
      document.getElementById('result').innerHTML = `<p class="text-gray-500 text-center italic">Cliquez sur "Générer un nouveau" pour créer un communiqué de miséricorde</p>`;
    });

    const selects = document.querySelectorAll('select');
    selects.forEach(select => {
      select.addEventListener('change', function() {
        updateManualCommunique();
      });
    });

    function updateManualCommunique() {
      const selectedValues = {};
      selects.forEach(select => {
        if (select.value) {
          selectedValues[select.id] = select.value;
        }
      });

      if (Object.keys(selectedValues).length > 0) {
        let communique = "";
        
        if (selectedValues.incidents) communique += selectedValues.incidents;
        if (selectedValues.acknowledgments) communique += `, ${selectedValues.acknowledgments}.`;
        if (selectedValues.apologies) communique += `\n\nPar ailleurs, ${selectedValues.apologies}.`;
        if (selectedValues.misericorde) communique += ` ${selectedValues.misericorde}.`;
        if (selectedValues.goodFruits) communique += `\n\nDans la tourmente, ${selectedValues.goodFruits}.`;
        if (selectedValues.originDeflection || selectedValues.scapegoats) {
          communique += " Il importe également, ";
          if (selectedValues.originDeflection) communique += selectedValues.originDeflection + ", ";
          if (selectedValues.scapegoats) communique += `de ne pas céder aux manœuvres de ${selectedValues.scapegoats}.`;
        }
        if (selectedValues.responses || selectedValues.actions) communique += "\n\nC'est pourquoi, ";
        if (selectedValues.responses) communique += selectedValues.responses + ", ";
        if (selectedValues.actions) communique += selectedValues.actions + " ";
        if (selectedValues.spiritualEndings) communique += selectedValues.spiritualEndings + ".";
        if (selectedValues.closings) communique += `\n\n${selectedValues.closings}.`;

        if (communique.trim()) {
          document.getElementById('result').innerHTML = `
            <div class="text-left">
              <p class="text-base font-medium text-gray-800 leading-relaxed mb-6 whitespace-pre-line">${communique}</p>
              <div class="text-right text-sm text-gray-600 italic mt-4">
                <p>+ Monseigneur Claude-Henri de Miséricorde</p>
                <p>Évêque de Saint-Barbant</p>
              </div>
            </div>
          `;
        }
      }
    }
  </script>
</Layout>
