---
import Layout from '../layouts/Layout.astro';

// New word lists for episcopal mis√©ricorde
const wordLists = {
  // Vague incident starters (raccourcis)
  incidents: [
    "Suite aux r√©cents √©v√©nements douloureux qui ont touch√© notre communaut√© dioc√©saine",
    "Face aux difficult√©s pastorales que traverse notre dioc√®se en ces temps troubl√©s",
    "Concernant les situations d√©licates port√©es √† notre attention",
    "√Ä la lumi√®re des t√©moignages poignants qui nous sont parvenus",
    "Devant les d√©fis pastoraux auxquels nous sommes confront√©s",
    "En r√©ponse aux pr√©occupations exprim√©es par nos fid√®les"
  ],

  // Vague acknowledgments (raccourcis)
  acknowledgments: [
    "nous reconnaissons avec humilit√© que des dysfonctionnements ont pu survenir",
    "nous prenons acte des questionnements soulev√©s par notre communaut√©",
    "nous entendons avec compassion les inqui√©tudes de nos paroissiens",
    "nous mesurons l'ampleur des interrogations suscit√©es par ces √©v√©nements",
    "nous sommes conscients des fragilit√©s humaines de notre institution",
    "nous accueillons avec s√©rieux les interpellations qui nous sont adress√©es"
  ],

  // Apologies for shocked and victims (raccourcis)
  apologies: [
    "nous exprimons notre compassion envers ceux qui ont √©t√© choqu√©s et encourageons chacun √† aller de l'avant",
    "nous manifestons notre empathie √† l'√©gard de ceux qui ont √©t√© troubl√©s",
    "nous t√©moignons de notre solidarit√© envers les √¢mes qui ont √©t√© √©branl√©es",
    "nous exprimons notre proximit√© avec tous ceux qui ont √©t√© affect√©s",
    "nous manifestons notre compr√©hension envers les personnes interpell√©es",
    "nous t√©moignons de notre sollicitude envers ceux qui ont √©t√© touch√©s"
  ],

  // Mis√©ricorde and presumption of innocence (raccourcis)
  misericorde: [
    "Rappelons que la mis√©ricorde divine s'√©tend √† tous, y compris √† ceux sous les projecteurs m√©diatiques, et que la pr√©somption d'innocence doit guider notre discernement",
    "Gardons √† l'esprit que la compassion √©vang√©lique concerne chaque membre de notre communaut√©, et que la pr√©somption d'innocence constitue un pilier de notre justice",
    "Souvenons-nous que la mis√©ricorde du Christ embrasse tous les enfants de Dieu, et que la pr√©somption d'innocence demeure un principe incontournable",
    "N'oublions pas que la gr√¢ce divine rayonne sur chacun, et que la pr√©somption d'innocence reste un fondement de notre approche pastorale",
    "Retenons que la bont√© divine s'√©tend √† tous nos fr√®res, et que la pr√©somption d'innocence constitue un pr√©alable √† tout jugement √©quitable"
  ],

  // "Dans la tourmente" transitions (inchang√©)
  tourmentes: [
    "Dans la tourmente",
    "Au c≈ìur de la temp√™te",
    "En ces temps d'√©preuve",
    "Malgr√© les turbulences",
    "Dans cette p√©riode difficile",
    "Au sein de ces bouleversements"
  ],

  // Good fruits deflection (raccourcis)
  goodFruits: [
    "il convient de ne pas occulter les nombreux fruits de gr√¢ce qui jaillissent dans nos paroisses",
    "nous devons garder √† l'esprit les merveilleux t√©moignages de foi qui illuminent notre dioc√®se",
    "il serait injuste d'ignorer les multiples actions caritatives qui rayonnent dans nos communaut√©s",
    "nous ne saurions oublier les vocations florissantes qui confirment l'action de l'Esprit Saint",
    "rappelons-nous les signes d'esp√©rance qui bourgeonnent dans notre √âglise locale",
    "gardons pr√©sents √† l'esprit les √©lans missionnaires qui dynamisent notre pastorale"
  ],

  // Origin deflection (raccourcis)
  originDeflection: [
    "sans nous leurrer sur l'origine de ces perturbations qui trouvent leurs racines dans des oppositions id√©ologiques",
    "en gardant √† l'esprit les v√©ritables sources de ces troubles",
    "sans perdre de vue les racines profondes de ces difficult√©s",
    "en identifiant les ferments de division qui cherchent √† √©branler notre unit√©",
    "sans ignorer les forces organis√©es qui cherchent √† d√©stabiliser notre communion",
    "en discernant les influences d√©l√©t√®res qui s'exercent sur notre communaut√©"
  ],

  // Scapegoats (raccourcis)
  scapegoats: [
    "certains m√©dias en qu√™te de sensationnalisme et prompts √† la d√©sinformation",
    "des mouvements traditionalistes nostalgiques et ferm√©s au souffle de l'Esprit",
    "des lobbies progressistes d√©connect√©s de la Tradition authentique de l'√âglise",
    "des r√©seaux occultes historiquement hostiles √† l'influence de l'√âvangile",
    "des groupuscules anticl√©ricaux anim√©s par une id√©ologie hostile √† la foi",
    "des influences s√©culi√®res cherchant √† saper le rayonnement de l'√âglise"
  ],

  // Langue de bois responses (raccourcis)
  responses: [
    "dans un esprit de dialogue constructif et de recherche de la v√©rit√©",
    "en nous appuyant sur les valeurs √©vang√©liques qui nous guident",
    "avec le souci du bien commun et de l'unit√© de notre √âglise",
    "dans une d√©marche de v√©rit√©, de justice et de r√©conciliation",
    "en privil√©giant l'√©coute bienveillante de chaque personne concern√©e",
    "dans le respect de la dignit√© de chaque personne cr√©√©e √† l'image de Dieu"
  ],

  // Actions (raccourcis mais toujours vagues)
  actions: [
    "nous nous engageons √† approfondir notre r√©flexion dans un esprit de synodalit√©",
    "nous mettons en place un processus d'√©valuation de nos pratiques pastorales",
    "nous renfor√ßons nos dispositifs d'accompagnement spirituel du clerg√©",
    "nous d√©veloppons une approche plus collaborative de la gouvernance dioc√©saine",
    "nous intensifions notre travail de pr√©vention aupr√®s de nos communaut√©s",
    "nous consolidons nos structures d'√©coute et d'accompagnement"
  ],

  // Spiritual endings (raccourcis)
  spiritualEndings: [
    "afin d'ouvrir des fen√™tres d'esp√©rance sur des vall√©es d'√©ternit√©",
    "pour que jaillissent des sources de gr√¢ce dans nos c≈ìurs confiants",
    "en vue de faire germer des semences de paix √©vang√©lique dans nos √¢mes",
    "dans l'espoir de voir fleurir la mis√©ricorde divine dans nos communaut√©s",
    "pour que r√©sonne la m√©lodie c√©leste dans nos pri√®res communes",
    "afin que s'√©panouisse la lumi√®re du Christ dans nos √©preuves"
  ],

  // Bullshitty closings (raccourcis)
  closings: [
    "Concentrons-nous sur ce qui est beau et √©vang√©lique et √©levons nos c≈ìurs vers la contemplation mystique",
    "Focalisons-nous sur les merveilles de la Cr√©ation divine et laissons les fanges √† ceux qui s'y complaisent",
    "Tournons nos regards vers les horizons de l'esp√©rance chr√©tienne plut√¥t que vers les mar√©cages de la pol√©mique",
    "Privil√©gions la beaut√© des liturgies solennelles aux cacophonies des controverses m√©diatiques",
    "Pr√©f√©rons les chants gr√©goriens aux clameurs m√©diatiques qui troublent nos √¢mes",
    "Choisissons les parfums de l'encens aux miasmes de la calomnie qui polluent l'atmosph√®re spirituelle"
  ]
};
---

<Layout title="Pipotron √âpiscopal">
  <div class="py-4">
    <!-- Title -->
    <h1 class="mb-6 text-4xl font-bold text-center">Pipotron √âpiscopal</h1>
    
    <!-- Official Document Result Area -->
    <div class="mb-6 mx-auto max-w-4xl">
      <div class="bg-white text-black rounded-lg shadow-2xl border-4 border-yellow-600 relative overflow-hidden">
        <!-- Official Header -->
        <div class="bg-gradient-to-r from-purple-900 to-blue-900 text-white p-6 text-center border-b-4 border-yellow-600">
          <div class="flex items-center justify-center space-x-4">
            <div class="w-12 h-12 bg-yellow-600 rounded-full flex items-center justify-center">
              <span class="text-2xl">‚úö</span>
            </div>
            <div>
              <h2 class="text-xl font-bold">COMMUNIQU√â DE PRESSE</h2>
              <p class="text-sm opacity-90">Dioc√®se de Saint-Barbant</p>
            </div>
            <div class="w-12 h-12 bg-yellow-600 rounded-full flex items-center justify-center">
              <span class="text-2xl">‚úö</span>
            </div>
          </div>
        </div>
        
        <!-- Document Content -->
        <div class="p-8">
          <div id="result" class="min-h-32 flex items-center justify-center">
            <p class="text-gray-500 text-center italic">
              Cliquez sur "G√©n√©rer un nouveau" pour cr√©er un communiqu√© de mis√©ricorde
            </p>
          </div>
        </div>
        
        <!-- Decorative corners -->
        <div class="absolute top-0 left-0 w-8 h-8 border-l-4 border-t-4 border-yellow-600"></div>
        <div class="absolute top-0 right-0 w-8 h-8 border-r-4 border-t-4 border-yellow-600"></div>
        <div class="absolute bottom-0 left-0 w-8 h-8 border-l-4 border-b-4 border-yellow-600"></div>
        <div class="absolute bottom-0 right-0 w-8 h-8 border-r-4 border-b-4 border-yellow-600"></div>
      </div>
    </div>

    <!-- Generate Button -->
    <div class="text-center mb-6">
      <button 
        id="generateBtn" 
        class="btn btn-lg bg-yellow-600 text-black hover:bg-yellow-700 font-semibold"
      >
        üôè G√©n√©rer un nouveau communiqu√© de mis√©ricorde
      </button>
    </div>

    <!-- Instructions -->
    <div class="mb-6 p-4 bg-white/5 rounded-lg border border-white/10">
      <p class="text-center text-white/90">
        Ou composez manuellement votre communiqu√© en s√©lectionnant dans les listes ci-dessous
      </p>
    </div>

    <!-- Word Lists Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3">
      <!-- Column 1 -->
      <div class="space-y-3">
        <div class="bg-white/5 rounded-lg p-3 border border-white/10">
          <label class="block text-white font-medium mb-2 text-sm">üì∞ Incident</label>
          <select 
            id="incidents" 
            class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
            size="4"
          >
            <option value="">-- Choisir --</option>
            {wordLists.incidents.map(word => <option value={word}>{word}</option>)}
          </select>
        </div>
        
        <div class="bg-white/5 rounded-lg p-3 border border-white/10">
          <label class="block text-white font-medium mb-2 text-sm">üçá Bons fruits</label>
          <select 
            id="goodFruits" 
            class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
            size="4"
          >
            <option value="">-- Choisir --</option>
            {wordLists.goodFruits.map(word => <option value={word}>{word}</option>)}
          </select>
        </div>
      </div>

      <!-- Column 2 -->
      <div class="space-y-3">
        <div class="bg-white/5 rounded-lg p-3 border border-white/10">
          <label class="block text-white font-medium mb-2 text-sm">üòî Reconnaissance</label>
          <select 
            id="acknowledgments" 
            class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
            size="4"
          >
            <option value="">-- Choisir --</option>
            {wordLists.acknowledgments.map(word => <option value={word}>{word}</option>)}
          </select>
        </div>
        
        <div class="bg-white/5 rounded-lg p-3 border border-white/10">
          <label class="block text-white font-medium mb-2 text-sm">üîç Origine</label>
          <select 
            id="originDeflection" 
            class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
            size="4"
          >
            <option value="">-- Choisir --</option>
            {wordLists.originDeflection.map(word => <option value={word}>{word}</option>)}
          </select>
        </div>
      </div>

      <!-- Column 3 -->
      <div class="space-y-3">
        <div class="bg-white/5 rounded-lg p-3 border border-white/10">
          <label class="block text-white font-medium mb-2 text-sm">üíî Excuses</label>
          <select 
            id="apologies" 
            class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
            size="4"
          >
            <option value="">-- Choisir --</option>
            {wordLists.apologies.map(word => <option value={word}>{word}</option>)}
          </select>
        </div>
        
        <div class="bg-white/5 rounded-lg p-3 border border-white/10">
          <label class="block text-white font-medium mb-2 text-sm">üéØ Boucs √©missaires</label>
          <select 
            id="scapegoats" 
            class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
            size="4"
          >
            <option value="">-- Choisir --</option>
            {wordLists.scapegoats.map(word => <option value={word}>{word}</option>)}
          </select>
        </div>
      </div>

      <!-- Column 4 -->
      <div class="space-y-3">
        <div class="bg-white/5 rounded-lg p-3 border border-white/10">
          <label class="block text-white font-medium mb-2 text-sm">üôè Mis√©ricorde</label>
          <select 
            id="misericorde" 
            class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
            size="4"
          >
            <option value="">-- Choisir --</option>
            {wordLists.misericorde.map(word => <option value={word}>{word}</option>)}
          </select>
        </div>
        
        <div class="bg-white/5 rounded-lg p-3 border border-white/10">
          <label class="block text-white font-medium mb-2 text-sm">üå∏ Conclusion</label>
          <select 
            id="closings" 
            class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-xs" 
            size="4"
          >
            <option value="">-- Choisir --</option>
            {wordLists.closings.map(word => <option value={word}>{word}</option>)}
          </select>
        </div>
      </div>
    </div>

    <!-- Reset Button -->
    <div class="text-center mt-6">
      <button 
        id="resetBtn" 
        class="btn bg-white/10 text-white hover:bg-white/20"
      >
        üîÑ R√©initialiser
      </button>
    </div>
  </div>

  <script>
    const wordLists = {
      incidents: [
        "Suite aux r√©cents √©v√©nements particuli√®rement douloureux qui ont touch√© notre communaut√© dioc√©saine et suscit√© de l√©gitimes interrogations",
        "Face aux difficult√©s pastorales complexes que traverse actuellement notre dioc√®se dans un contexte soci√©tal en pleine mutation",
        "Concernant les situations d√©licates et sensibles port√©es √† notre attention par diff√©rents canaux d'information",
        "√Ä la lumi√®re des t√©moignages poignants qui nous sont parvenus et qui m√©ritent toute notre attention bienveillante",
        "Devant les d√©fis pastoraux consid√©rables auxquels nous sommes confront√©s en ces temps troubl√©s",
        "En r√©ponse aux pr√©occupations l√©gitimes et compr√©hensibles exprim√©es par nos fid√®les les plus attentifs"
      ],
      acknowledgments: [
        "nous reconnaissons avec humilit√© et contrition que des dysfonctionnements regrettables ont pu survenir dans notre organisation pastorale",
        "nous prenons acte avec gravit√© des questionnements profonds soulev√©s par certains membres √©minents de notre communaut√©",
        "nous entendons avec compassion les inqui√©tudes l√©gitimes exprim√©es par nos paroissiens les plus fid√®les et d√©vou√©s",
        "nous mesurons pleinement l'ampleur des interrogations suscit√©es par ces √©v√©nements dans l'opinion publique",
        "nous sommes parfaitement conscients des fragilit√©s humaines qui ont pu se manifester dans notre institution",
        "nous accueillons avec le plus grand s√©rieux les interpellations constructives qui nous sont adress√©es"
      ],
      apologies: [
        "nous exprimons notre profonde compassion envers toutes les personnes qui ont pu √™tre choqu√©es par ces r√©v√©lations et encourageons chacun √† aller de l'avant dans un esprit de r√©conciliation",
        "nous manifestons notre sinc√®re empathie √† l'√©gard de ceux qui ont √©t√© troubl√©s par ces √©v√©nements et les invitons √† cheminer vers la gu√©rison spirituelle",
        "nous t√©moignons de notre solidarit√© fraternelle envers les √¢mes sensibles qui ont √©t√© √©branl√©es et les accompagnons dans leur d√©marche d'aller de l'avant",
        "nous exprimons notre proximit√© bienveillante avec tous ceux qui ont √©t√© affect√©s et les encourageons √† poursuivre leur marche vers la paix int√©rieure",
        "nous manifestons notre compr√©hension pastorale envers les personnes qui ont √©t√© interpell√©es et les soutenons dans leur d√©sir d'aller de l'avant constructivement",
        "nous t√©moignons de notre sollicitude particuli√®re envers ceux qui ont √©t√© touch√©s et les accompagnons dans leur cheminement vers la s√©r√©nit√©"
      ],
      misericorde: [
        "Rappelons que la mis√©ricorde divine s'√©tend √† tous sans exception, y compris √† ceux qui se trouvent aujourd'hui sous les projecteurs m√©diatiques, et que le principe fondamental de pr√©somption d'innocence doit guider notre discernement",
        "Gardons √† l'esprit que la compassion √©vang√©lique concerne chaque membre de notre communaut√©, notamment ceux qui font l'objet d'accusations, et que la pr√©somption d'innocence constitue un pilier de notre justice",
        "Souvenons-nous que la mis√©ricorde du Christ embrasse tous les enfants de Dieu, particuli√®rement ceux qui sont actuellement dans l'√©preuve m√©diatique, et que la pr√©somption d'innocence demeure un principe incontournable",
        "N'oublions pas que la gr√¢ce divine rayonne sur chacun, y compris sur ceux qui traversent actuellement des moments difficiles, et que la pr√©somption d'innocence reste un fondement de notre approche pastorale",
        "Retenons que la bont√© divine s'√©tend √† tous nos fr√®res, sp√©cialement √† ceux qui sont aujourd'hui expos√©s publiquement, et que la pr√©somption d'innocence constitue un pr√©alable √† tout jugement √©quitable",
        "M√©ditons sur le fait que la tendresse du Seigneur concerne chaque personne, notamment celles qui sont actuellement sous le feu des critiques, et que la pr√©somption d'innocence guide notre d√©marche de v√©rit√©"
      ],
      tourmentes: [
        "Dans la tourmente",
        "Au c≈ìur de la temp√™te",
        "En ces temps d'√©preuve",
        "Malgr√© les turbulences",
        "Dans cette p√©riode difficile",
        "Au sein de ces bouleversements"
      ],
      goodFruits: [
        "il convient n√©anmoins de ne pas occulter les nombreux fruits de gr√¢ce extraordinaires qui jaillissent quotidiennement dans nos paroisses et t√©moignent de la vitalit√© de notre foi",
        "nous devons imp√©rativement garder √† l'esprit les merveilleux t√©moignages de foi authentique qui illuminent notre dioc√®se et r√©chauffent nos c≈ìurs",
        "il serait profond√©ment injuste d'ignorer les multiples actions caritatives remarquables qui rayonnent dans nos communaut√©s et honorent l'√âvangile",
        "nous ne saurions oublier les vocations florissantes et les conversions authentiques qui nous r√©jouissent et confirment l'action de l'Esprit Saint",
        "rappelons-nous avec gratitude les signes d'esp√©rance manifestes qui bourgeonnent dans le terreau fertile de notre √âglise locale",
        "gardons pr√©sents √† l'esprit les √©lans missionnaires enthousiastes qui dynamisent notre pastorale et ouvrent des horizons nouveaux"
      ],
      originDeflection: [
        "sans nous leurrer sur l'origine v√©ritable de ces perturbations qui trouvent leurs racines dans des oppositions id√©ologiques bien connues",
        "en gardant lucidement √† l'esprit les v√©ritables sources de ces troubles qui s'enracinent dans des conflits d'int√©r√™ts manifestes",
        "sans perdre de vue les racines profondes de ces difficult√©s qui puisent dans des antagonismes anciens et persistants",
        "en identifiant clairement les ferments de division pernicieux qui nous assaillent et cherchent √† √©branler notre unit√©",
        "sans ignorer les forces centrifuges organis√©es qui cherchent m√©thodiquement √† d√©stabiliser notre communion fraternelle",
        "en discernant avec sagesse les influences d√©l√©t√®res ext√©rieures qui s'exercent insidieusement sur notre communaut√©"
      ],
      scapegoats: [
        "certains m√©dias en qu√™te permanente de sensationnalisme et particuli√®rement prompts √† la d√©sinformation syst√©matique",
        "des mouvements traditionalistes nostalgiques d'un pass√© id√©alis√© et herm√©tiquement ferm√©s au souffle renouvelant de l'Esprit",
        "des lobbies progressistes radicalement d√©connect√©s de la Tradition vivante et authentique de notre sainte √âglise",
        "des r√©seaux ma√ßonniques historiquement hostiles √† l'influence b√©n√©fique et civilisatrice de l'√âvangile dans la soci√©t√©",
        "des groupuscules anticl√©ricaux visc√©ralement anim√©s par une id√©ologie fondamentalement hostile √† la foi chr√©tienne",
        "des influences s√©culi√®res organis√©es cherchant syst√©matiquement √† saper l'autorit√© l√©gitime et le rayonnement de l'√âglise"
      ],
      responses: [
        "dans un esprit de dialogue constructif, de discernement pastoral approfondi et de recherche commune de la v√©rit√©",
        "en nous appuyant fermement sur les valeurs √©vang√©liques intemporelles qui nous guident dans toutes nos d√©marches",
        "avec le souci constant et prioritaire du bien commun et de l'unit√© ind√©fectible de notre sainte √âglise",
        "dans une d√©marche exigeante de v√©rit√©, de justice et de r√©conciliation authentique avec tous nos fr√®res",
        "en privil√©giant syst√©matiquement l'√©coute bienveillante et l'accompagnement personnalis√© de chaque personne concern√©e",
        "dans le respect absolu de la dignit√© inali√©nable de chaque personne humaine cr√©√©e √† l'image de Dieu"
      ],
      actions: [
        "nous nous engageons solennellement √† approfondir notre r√©flexion coll√©giale dans un esprit de synodalit√© renouvel√©e",
        "nous mettons r√©solument en place un processus rigoureux d'√©valuation et d'am√©lioration continue de nos pratiques pastorales",
        "nous renfor√ßons consid√©rablement nos dispositifs d'accompagnement spirituel et de formation permanente du clerg√©",
        "nous d√©veloppons m√©thodiquement une approche plus collaborative, transparente et participative de la gouvernance dioc√©saine",
        "nous intensifions significativement notre travail de pr√©vention et de sensibilisation aupr√®s de toutes nos communaut√©s",
        "nous consolidons durablement nos structures d'√©coute, de m√©diation et d'accompagnement des personnes en difficult√©"
      ],
      spiritualEndings: [
        "afin d'ouvrir toujours plus largement des fen√™tres d'esp√©rance lumineuses sur des vall√©es d'√©ternit√© bienheureuse",
        "pour que jaillissent abondamment des sources de gr√¢ce purificatrices dans nos c≈ìurs meurtris mais confiants",
        "en vue de faire germer patiemment des semences de paix √©vang√©lique dans le jardin secret de nos √¢mes",
        "dans l'espoir ferme de voir fleurir magnifiquement la mis√©ricorde divine dans toutes nos communaut√©s paroissiales",
        "pour que r√©sonne harmonieusement la m√©lodie c√©leste dans le silence f√©cond de nos pri√®res communes",
        "afin que s'√©panouisse pleinement la lumi√®re r√©demptrice du Christ dans les t√©n√®bres passag√®res de nos √©preuves"
      ],
      closings: [
        "Concentrons-nous r√©solument sur ce qui est beau et authentiquement √©vang√©lique et √©levons nos c≈ìurs vers les sph√®res sup√©rieures de la contemplation mystique",
        "Focalisons-nous prioritairement sur les merveilles ineffables de la Cr√©ation divine et laissons donc les fanges boueuses √† ceux qui aiment s'y complaire",
        "Tournons nos regards confiants vers les horizons lumineux de l'esp√©rance chr√©tienne plut√¥t que vers les mar√©cages st√©riles de la pol√©mique",
        "Privil√©gions la beaut√© transcendante des liturgies solennelles aux cacophonies discordantes des controverses m√©diatiques st√©riles",
        "Pr√©f√©rons les chants gr√©goriens mill√©naires aux clameurs m√©diatiques √©ph√©m√®res qui troublent la s√©r√©nit√© de nos √¢mes",
        "Choisissons les parfums sacr√©s de l'encens aux miasmes empoisonn√©s de la calomnie qui polluent l'atmosph√®re spirituelle"
      ]
    };

    function getRandomItem(array) {
      return array[Math.floor(Math.random() * array.length)];
    }

    function generateCommunique() {
      const incident = getRandomItem(wordLists.incidents);
      const acknowledgment = getRandomItem(wordLists.acknowledgments);
      const apology = getRandomItem(wordLists.apologies);
      const misericorde = getRandomItem(wordLists.misericorde);
      const tourmente = getRandomItem(wordLists.tourmentes);
      const goodFruit = getRandomItem(wordLists.goodFruits);
      const originDeflection = getRandomItem(wordLists.originDeflection);
      const scapegoat = getRandomItem(wordLists.scapegoats);
      const response = getRandomItem(wordLists.responses);
      const action = getRandomItem(wordLists.actions);
      const spiritualEnding = getRandomItem(wordLists.spiritualEndings);
      const closing = getRandomItem(wordLists.closings);

      const communique = `${incident}, ${acknowledgment}.

Dans ce contexte, ${apology}. ${misericorde}.

${tourmente}, ${goodFruit}. Il importe √©galement, ${originDeflection}, de ne pas c√©der aux man≈ìuvres ${scapegoat}.

C'est pourquoi, ${response}, ${action} ${spiritualEnding}.

${closing}.`;
      
      return communique;
    }

    document.getElementById('generateBtn').addEventListener('click', function() {
      const communique = generateCommunique();
      document.getElementById('result').innerHTML = `
        <div class="text-left">
          <p class="text-base font-medium text-gray-800 leading-relaxed mb-6 whitespace-pre-line">${communique}</p>
          <div class="text-right text-sm text-gray-600 italic mt-4">
            <p>+ Monseigneur Claude-Henri de Mis√©ricorde</p>
            <p>√âv√™que de Saint-Barbant</p>
          </div>
        </div>
      `;
    });

    document.getElementById('resetBtn').addEventListener('click', function() {
      const selects = document.querySelectorAll('select');
      selects.forEach(select => {
        select.selectedIndex = 0;
      });
      document.getElementById('result').innerHTML = `<p class="text-gray-500 text-center italic">Cliquez sur "G√©n√©rer un nouveau" pour cr√©er un communiqu√© de mis√©ricorde</p>`;
    });

    const selects = document.querySelectorAll('select');
    selects.forEach(select => {
      select.addEventListener('change', function() {
        updateManualCommunique();
      });
    });

    function updateManualCommunique() {
      const selectedValues = {};
      selects.forEach(select => {
        if (select.value) {
          selectedValues[select.id] = select.value;
        }
      });

      if (Object.keys(selectedValues).length > 0) {
        let communique = "";
        
        if (selectedValues.incidents) communique += selectedValues.incidents;
        if (selectedValues.acknowledgments) communique += `, ${selectedValues.acknowledgments}.`;
        if (selectedValues.apologies) communique += `\n\nPar ailleurs, ${selectedValues.apologies}.`;
        if (selectedValues.misericorde) communique += ` ${selectedValues.misericorde}.`;
        if (selectedValues.goodFruits) communique += `\n\nDans la tourmente, ${selectedValues.goodFruits}.`;
        if (selectedValues.originDeflection || selectedValues.scapegoats) {
          communique += " Il importe √©galement, ";
          if (selectedValues.originDeflection) communique += selectedValues.originDeflection + ", ";
          if (selectedValues.scapegoats) communique += `de ne pas c√©der aux man≈ìuvres de ${selectedValues.scapegoats}.`;
        }
        if (selectedValues.responses || selectedValues.actions) communique += "\n\nC'est pourquoi, ";
        if (selectedValues.responses) communique += selectedValues.responses + ", ";
        if (selectedValues.actions) communique += selectedValues.actions + " ";
        if (selectedValues.spiritualEndings) communique += selectedValues.spiritualEndings + ".";
        if (selectedValues.closings) communique += `\n\n${selectedValues.closings}.`;

        if (communique.trim()) {
          document.getElementById('result').innerHTML = `
            <div class="text-left">
              <p class="text-base font-medium text-gray-800 leading-relaxed mb-6 whitespace-pre-line">${communique}</p>
              <div class="text-right text-sm text-gray-600 italic mt-4">
                <p>+ Monseigneur Claude-Henri de Mis√©ricorde</p>
                <p>√âv√™que de Saint-Barbant</p>
              </div>
            </div>
          `;
        }
      }
    }
  </script>
</Layout>
