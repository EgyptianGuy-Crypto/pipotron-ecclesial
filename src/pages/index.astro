---
import Layout from '../layouts/Layout.astro';

// New word lists for episcopal mis√©ricorde
const wordLists = {
  // Vague incident starters
  incidents: [
    "Suite aux r√©cents √©v√©nements qui ont touch√© notre communaut√©",
    "Face aux difficult√©s que traverse actuellement notre dioc√®se",
    "Concernant les situations d√©licates port√©es √† notre attention",
    "√Ä la lumi√®re des t√©moignages qui nous sont parvenus",
    "Devant les d√©fis pastoraux auxquels nous sommes confront√©s",
    "En r√©ponse aux pr√©occupations l√©gitimes de nos fid√®les"
  ],
  
  // Vague acknowledgments
  acknowledgments: [
    "nous reconnaissons avec humilit√© que des dysfonctionnements ont pu survenir",
    "nous prenons acte des questionnements soulev√©s par certains membres de notre communaut√©",
    "nous entendons les inqui√©tudes exprim√©es par nos paroissiens",
    "nous mesurons l'ampleur des interrogations suscit√©es",
    "nous sommes conscients des fragilit√©s qui ont pu se manifester",
    "nous accueillons avec s√©rieux les interpellations qui nous sont adress√©es"
  ],
  
  // Good fruits deflection
  goodFruits: [
    "il convient n√©anmoins de ne pas occulter les nombreux fruits de gr√¢ce qui jaillissent quotidiennement dans nos paroisses",
    "nous devons garder √† l'esprit les merveilleux t√©moignages de foi qui illuminent notre dioc√®se",
    "il serait injuste d'ignorer les multiples actions caritatives qui rayonnent dans nos communaut√©s",
    "nous ne saurions oublier les vocations florissantes et les conversions authentiques qui nous r√©jouissent",
    "rappelons-nous les signes d'esp√©rance qui bourgeonnent dans le terreau fertile de notre √âglise locale",
    "gardons pr√©sents √† l'esprit les √©lans missionnaires qui dynamisent notre pastorale"
  ],
  
  // Origin deflection
  originDeflection: [
    "sans nous leurrer sur l'origine v√©ritable de ces perturbations",
    "en gardant √† l'esprit les v√©ritables sources de ces troubles",
    "sans perdre de vue les racines profondes de ces difficult√©s",
    "en identifiant clairement les ferments de division qui nous assaillent",
    "sans ignorer les forces centrifuges qui cherchent √† d√©stabiliser notre unit√©",
    "en discernant les influences d√©l√©t√®res qui s'exercent sur notre communaut√©"
  ],
  
  // Scapegoats
  scapegoats: [
    "certains m√©dias en qu√™te de sensationnalisme et prompts √† la d√©sinformation",
    "des mouvements traditionalistes nostalgiques d'un pass√© r√©volu et ferm√©s au souffle de l'Esprit",
    "des lobbies progressistes d√©connect√©s de la Tradition vivante de l'√âglise",
    "des r√©seaux ma√ßonniques hostiles √† l'influence b√©n√©fique de l'√âvangile dans la soci√©t√©",
    "des groupuscules anticl√©ricaux anim√©s par une id√©ologie hostile √† la foi",
    "des influences s√©culi√®res cherchant √† saper l'autorit√© l√©gitime de l'√âglise"
  ],
  
  // Langue de bois responses
  responses: [
    "dans un esprit de dialogue constructif et de discernement pastoral",
    "en nous appuyant sur les valeurs √©vang√©liques qui nous guident",
    "avec le souci constant du bien commun et de l'unit√© de notre √âglise",
    "dans une d√©marche de v√©rit√© et de r√©conciliation",
    "en privil√©giant l'√©coute bienveillante et l'accompagnement personnalis√©",
    "dans le respect de la dignit√© de chaque personne concern√©e"
  ],
  
  // Actions (vague)
  actions: [
    "nous nous engageons √† approfondir notre r√©flexion coll√©giale",
    "nous mettons en place un processus d'√©valuation et d'am√©lioration continue",
    "nous renfor√ßons nos dispositifs d'accompagnement et de formation",
    "nous d√©veloppons une approche plus collaborative et transparente",
    "nous intensifions notre travail de pr√©vention et de sensibilisation",
    "nous consolidons nos structures d'√©coute et de m√©diation"
  ],
  
  // Spiritual endings
  spiritualEndings: [
    "afin d'ouvrir des fen√™tres d'esp√©rance sur des vall√©es d'√©ternit√©",
    "pour que jaillissent des sources de gr√¢ce dans nos c≈ìurs meurtris",
    "en vue de faire germer des semences de paix dans le jardin de nos √¢mes",
    "dans l'espoir de voir fleurir la mis√©ricorde divine dans nos communaut√©s",
    "pour que r√©sonne l'harmonie c√©leste dans le silence de nos pri√®res",
    "afin que s'√©panouisse la lumi√®re du Christ dans les t√©n√®bres de nos √©preuves"
  ],
  
  // Bullshitty closings
  closings: [
    "Concentrons-nous sur ce qui est beau et √©levons nos c≈ìurs vers les sph√®res sup√©rieures de la contemplation",
    "Focalisons-nous sur les merveilles de la Cr√©ation et laissons donc les fanges boueuses √† ceux qui aiment tra√Æner dedans",
    "Tournons nos regards vers les horizons lumineux de l'esp√©rance plut√¥t que vers les mar√©cages de la pol√©mique",
    "Privil√©gions la beaut√© des liturgies solennelles aux cacophonies des controverses st√©riles",
    "Pr√©f√©rons les chants gr√©goriens aux clameurs m√©diatiques qui troublent la s√©r√©nit√© de nos √¢mes",
    "Choisissons les parfums de l'encens aux miasmes de la calomnie qui empoisonnent l'atmosph√®re"
  ]
};
---

<Layout title="Pipotron √âpiscopal">
  <div class="py-4">
    <!-- Title -->
    <h1 class="mb-6 text-4xl font-bold text-center">Pipotron √âpiscopal</h1>
    
    <!-- Official Document Result Area -->
    <div class="mb-6 mx-auto max-w-4xl">
      <div class="bg-white text-black rounded-lg shadow-2xl border-4 border-yellow-600 relative overflow-hidden">
        <!-- Official Header -->
        <div class="bg-gradient-to-r from-purple-900 to-blue-900 text-white p-6 text-center border-b-4 border-yellow-600">
          <div class="flex items-center justify-center space-x-4">
            <div class="w-12 h-12 bg-yellow-600 rounded-full flex items-center justify-center">
              <span class="text-2xl">‚úö</span>
            </div>
            <div>
              <h2 class="text-xl font-bold">COMMUNIQU√â DE PRESSE</h2>
              <p class="text-sm opacity-90">Dioc√®se de Saint-Barbant</p>
            </div>
            <div class="w-12 h-12 bg-yellow-600 rounded-full flex items-center justify-center">
              <span class="text-2xl">‚úö</span>
            </div>
          </div>
        </div>
        
        <!-- Document Content -->
        <div class="p-8">
          <div id="result" class="min-h-32 flex items-center justify-center">
            <p class="text-gray-500 text-center italic">
              Cliquez sur "G√©n√©rer un nouveau" pour cr√©er un communiqu√© de mis√©ricorde
            </p>
          </div>
        </div>
        
        <!-- Decorative corners -->
        <div class="absolute top-0 left-0 w-8 h-8 border-l-4 border-t-4 border-yellow-600"></div>
        <div class="absolute top-0 right-0 w-8 h-8 border-r-4 border-t-4 border-yellow-600"></div>
        <div class="absolute bottom-0 left-0 w-8 h-8 border-l-4 border-b-4 border-yellow-600"></div>
        <div class="absolute bottom-0 right-0 w-8 h-8 border-r-4 border-b-4 border-yellow-600"></div>
      </div>
    </div>

    <!-- Generate Button -->
    <div class="text-center mb-6">
      <button 
        id="generateBtn" 
        class="btn btn-lg bg-yellow-600 text-black hover:bg-yellow-700 font-semibold"
      >
        üôè G√©n√©rer un nouveau communiqu√© de mis√©ricorde
      </button>
    </div>

    <!-- Instructions -->
    <div class="mb-6 p-4 bg-white/5 rounded-lg border border-white/10">
      <p class="text-center text-white/90">
        Ou composez manuellement votre communiqu√© en s√©lectionnant dans les listes ci-dessous
      </p>
    </div>

    <!-- Word Lists Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      <!-- Column 1 -->
      <div class="space-y-4">
        <div class="bg-white/5 rounded-lg p-4 border border-white/10">
          <label class="block text-white font-medium mb-3">üì∞ Incident (vague)</label>
          <select 
            id="incidents" 
            class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-sm" 
            size="5"
          >
            <option value="">-- Choisir --</option>
            {wordLists.incidents.map(word => <option value={word}>{word}</option>)}
          </select>
        </div>
        
        <div class="bg-white/5 rounded-lg p-4 border border-white/10">
          <label class="block text-white font-medium mb-3">üçá Bons fruits</label>
          <select 
            id="goodFruits" 
            class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-sm" 
            size="5"
          >
            <option value="">-- Choisir --</option>
            {wordLists.goodFruits.map(word => <option value={word}>{word}</option>)}
          </select>
        </div>
        
        <div class="bg-white/5 rounded-lg p-4 border border-white/10">
          <label class="block text-white font-medium mb-3">‚ö° Actions (vagues)</label>
          <select 
            id="actions" 
            class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-sm" 
            size="5"
          >
            <option value="">-- Choisir --</option>
            {wordLists.actions.map(word => <option value={word}>{word}</option>)}
          </select>
        </div>
      </div>

      <!-- Column 2 -->
      <div class="space-y-4">
        <div class="bg-white/5 rounded-lg p-4 border border-white/10">
          <label class="block text-white font-medium mb-3">üòî Reconnaissance (floue)</label>
          <select 
            id="acknowledgments" 
            class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-sm" 
            size="5"
          >
            <option value="">-- Choisir --</option>
            {wordLists.acknowledgments.map(word => <option value={word}>{word}</option>)}
          </select>
        </div>
        
        <div class="bg-white/5 rounded-lg p-4 border border-white/10">
          <label class="block text-white font-medium mb-3">üîç Origine (d√©flection)</label>
          <select 
            id="originDeflection" 
            class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-sm" 
            size="5"
          >
            <option value="">-- Choisir --</option>
            {wordLists.originDeflection.map(word => <option value={word}>{word}</option>)}
          </select>
        </div>
        
        <div class="bg-white/5 rounded-lg p-4 border border-white/10">
          <label class="block text-white font-medium mb-3">‚ú® Fin spirituelle</label>
          <select 
            id="spiritualEndings" 
            class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-sm" 
            size="5"
          >
            <option value="">-- Choisir --</option>
            {wordLists.spiritualEndings.map(word => <option value={word}>{word}</option>)}
          </select>
        </div>
      </div>

      <!-- Column 3 -->
      <div class="space-y-4">
        <div class="bg-white/5 rounded-lg p-4 border border-white/10">
          <label class="block text-white font-medium mb-3">üéØ Boucs √©missaires</label>
          <select 
            id="scapegoats" 
            class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-sm" 
            size="5"
          >
            <option value="">-- Choisir --</option>
            {wordLists.scapegoats.map(word => <option value={word}>{word}</option>)}
          </select>
        </div>
        
        <div class="bg-white/5 rounded-lg p-4 border border-white/10">
          <label class="block text-white font-medium mb-3">ü§ù R√©ponse (langue de bois)</label>
          <select 
            id="responses" 
            class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-sm" 
            size="5"
          >
            <option value="">-- Choisir --</option>
            {wordLists.responses.map(word => <option value={word}>{word}</option>)}
          </select>
        </div>
        
        <div class="bg-white/5 rounded-lg p-4 border border-white/10">
          <label class="block text-white font-medium mb-3">üå∏ Conclusion bullshitty</label>
          <select 
            id="closings" 
            class="w-full p-2 bg-white/10 border border-white/20 rounded text-white text-sm" 
            size="5"
          >
            <option value="">-- Choisir --</option>
            {wordLists.closings.map(word => <option value={word}>{word}</option>)}
          </select>
        </div>
      </div>
    </div>

    <!-- Reset Button -->
    <div class="text-center mt-6">
      <button 
        id="resetBtn" 
        class="btn bg-white/10 text-white hover:bg-white/20"
      >
        üîÑ R√©initialiser
      </button>
    </div>
  </div>

  <script>
    const wordLists = {
      incidents: [
        "Suite aux r√©cents √©v√©nements qui ont touch√© notre communaut√©",
        "Face aux difficult√©s que traverse actuellement notre dioc√®se",
        "Concernant les situations d√©licates port√©es √† notre attention",
        "√Ä la lumi√®re des t√©moignages qui nous sont parvenus",
        "Devant les d√©fis pastoraux auxquels nous sommes confront√©s",
        "En r√©ponse aux pr√©occupations l√©gitimes de nos fid√®les"
      ],
      acknowledgments: [
        "nous reconnaissons avec humilit√© que des dysfonctionnements ont pu survenir",
        "nous prenons acte des questionnements soulev√©s par certains membres de notre communaut√©",
        "nous entendons les inqui√©tudes exprim√©es par nos paroissiens",
        "nous mesurons l'ampleur des interrogations suscit√©es",
        "nous sommes conscients des fragilit√©s qui ont pu se manifester",
        "nous accueillons avec s√©rieux les interpellations qui nous sont adress√©es"
      ],
      goodFruits: [
        "il convient n√©anmoins de ne pas occulter les nombreux fruits de gr√¢ce qui jaillissent quotidiennement dans nos paroisses",
        "nous devons garder √† l'esprit les merveilleux t√©moignages de foi qui illuminent notre dioc√®se",
        "il serait injuste d'ignorer les multiples actions caritatives qui rayonnent dans nos communaut√©s",
        "nous ne saurions oublier les vocations florissantes et les conversions authentiques qui nous r√©jouissent",
        "rappelons-nous les signes d'esp√©rance qui bourgeonnent dans le terreau fertile de notre √âglise locale",
        "gardons pr√©sents √† l'esprit les √©lans missionnaires qui dynamisent notre pastorale"
      ],
      originDeflection: [
        "sans nous leurrer sur l'origine v√©ritable de ces perturbations",
        "en gardant √† l'esprit les v√©ritables sources de ces troubles",
        "sans perdre de vue les racines profondes de ces difficult√©s",
        "en identifiant clairement les ferments de division qui nous assaillent",
        "sans ignorer les forces centrifuges qui cherchent √† d√©stabiliser notre unit√©",
        "en discernant les influences d√©l√©t√®res qui s'exercent sur notre communaut√©"
      ],
      scapegoats: [
        "certains m√©dias en qu√™te de sensationnalisme et prompts √† la d√©sinformation",
        "des mouvements traditionalistes nostalgiques d'un pass√© r√©volu et ferm√©s au souffle de l'Esprit",
        "des lobbies progressistes d√©connect√©s de la Tradition vivante de l'√âglise",
        "des r√©seaux ma√ßonniques hostiles √† l'influence b√©n√©fique de l'√âvangile dans la soci√©t√©",
        "des groupuscules anticl√©ricaux anim√©s par une id√©ologie hostile √† la foi",
        "des influences s√©culi√®res cherchant √† saper l'autorit√© l√©gitime de l'√âglise"
      ],
      responses: [
        "dans un esprit de dialogue constructif et de discernement pastoral",
        "en nous appuyant sur les valeurs √©vang√©liques qui nous guident",
        "avec le souci constant du bien commun et de l'unit√© de notre √âglise",
        "dans une d√©marche de v√©rit√© et de r√©conciliation",
        "en privil√©giant l'√©coute bienveillante et l'accompagnement personnalis√©",
        "dans le respect de la dignit√© de chaque personne concern√©e"
      ],
      actions: [
        "nous nous engageons √† approfondir notre r√©flexion coll√©giale",
        "nous mettons en place un processus d'√©valuation et d'am√©lioration continue",
        "nous renfor√ßons nos dispositifs d'accompagnement et de formation",
        "nous d√©veloppons une approche plus collaborative et transparente",
        "nous intensifions notre travail de pr√©vention et de sensibilisation",
        "nous consolidons nos structures d'√©coute et de m√©diation"
      ],
      spiritualEndings: [
        "afin d'ouvrir des fen√™tres d'esp√©rance sur des vall√©es d'√©ternit√©",
        "pour que jaillissent des sources de gr√¢ce dans nos c≈ìurs meurtris",
        "en vue de faire germer des semences de paix dans le jardin de nos √¢mes",
        "dans l'espoir de voir fleurir la mis√©ricorde divine dans nos communaut√©s",
        "pour que r√©sonne l'harmonie c√©leste dans le silence de nos pri√®res",
        "afin que s'√©panouisse la lumi√®re du Christ dans les t√©n√®bres de nos √©preuves"
      ],
      closings: [
        "Concentrons-nous sur ce qui est beau et √©levons nos c≈ìurs vers les sph√®res sup√©rieures de la contemplation",
        "Focalisons-nous sur les merveilles de la Cr√©ation et laissons donc les fanges boueuses √† ceux qui aiment tra√Æner dedans",
        "Tournons nos regards vers les horizons lumineux de l'esp√©rance plut√¥t que vers les mar√©cages de la pol√©mique",
        "Privil√©gions la beaut√© des liturgies solennelles aux cacophonies des controverses st√©riles",
        "Pr√©f√©rons les chants gr√©goriens aux clameurs m√©diatiques qui troublent la s√©r√©nit√© de nos √¢mes",
        "Choisissons les parfums de l'encens aux miasmes de la calomnie qui empoisonnent l'atmosph√®re"
      ]
    };

    function getRandomItem(array) {
      return array[Math.floor(Math.random() * array.length)];
    }

    function generateCommunique() {
      const incident = getRandomItem(wordLists.incidents);
      const acknowledgment = getRandomItem(wordLists.acknowledgments);
      const goodFruit = getRandomItem(wordLists.goodFruits);
      const originDeflection = getRandomItem(wordLists.originDeflection);
      const scapegoat = getRandomItem(wordLists.scapegoats);
      const response = getRandomItem(wordLists.responses);
      const action = getRandomItem(wordLists.actions);
      const spiritualEnding = getRandomItem(wordLists.spiritualEndings);
      const closing = getRandomItem(wordLists.closings);

      const communique = `${incident}, ${acknowledgment}. 

Cependant, ${goodFruit}. 

Il importe √©galement, ${originDeflection}, de ne pas c√©der aux man≈ìuvres de ${scapegoat}.

C'est pourquoi, ${response}, ${action} ${spiritualEnding}.

${closing}.`;
      
      return communique;
    }

    document.getElementById('generateBtn').addEventListener('click', function() {
      const communique = generateCommunique();
      document.getElementById('result').innerHTML = `
        <div class="text-left">
          <p class="text-base font-medium text-gray-800 leading-relaxed mb-6 whitespace-pre-line">${communique}</p>
          <div class="text-right text-sm text-gray-600 italic mt-4">
            <p>+ Monseigneur Claude-Henri de Mis√©ricorde</p>
            <p>√âv√™que de Saint-Barbant</p>
          </div>
        </div>
      `;
    });

    document.getElementById('resetBtn').addEventListener('click', function() {
      const selects = document.querySelectorAll('select');
      selects.forEach(select => {
        select.selectedIndex = 0;
      });
      document.getElementById('result').innerHTML = `<p class="text-gray-500 text-center italic">Cliquez sur "G√©n√©rer un nouveau" pour cr√©er un communiqu√© de mis√©ricorde</p>`;
    });

    const selects = document.querySelectorAll('select');
    selects.forEach(select => {
      select.addEventListener('change', function() {
        updateManualCommunique();
      });
    });

    function updateManualCommunique() {
      const selectedValues = {};
      selects.forEach(select => {
        if (select.value) {
          selectedValues[select.id] = select.value;
        }
      });

      if (Object.keys(selectedValues).length > 0) {
        let communique = "";
        
        if (selectedValues.incidents) communique += selectedValues.incidents;
        if (selectedValues.acknowledgments) communique += `, ${selectedValues.acknowledgments}.`;
        if (selectedValues.goodFruits) communique += `\n\nCependant, ${selectedValues.goodFruits}.`;
        if (selectedValues.originDeflection || selectedValues.scapegoats) {
          communique += "\n\nIl importe √©galement, ";
          if (selectedValues.originDeflection) communique += selectedValues.originDeflection + ", ";
          if (selectedValues.scapegoats) communique += `de ne pas c√©der aux man≈ìuvres de ${selectedValues.scapegoats}.`;
        }
        if (selectedValues.responses || selectedValues.actions) communique += "\n\nC'est pourquoi, ";
        if (selectedValues.responses) communique += selectedValues.responses + ", ";
        if (selectedValues.actions) communique += selectedValues.actions + " ";
        if (selectedValues.spiritualEndings) communique += selectedValues.spiritualEndings + ".";
        if (selectedValues.closings) communique += `\n\n${selectedValues.closings}.`;

        if (communique.trim()) {
          document.getElementById('result').innerHTML = `
            <div class="text-left">
              <p class="text-base font-medium text-gray-800 leading-relaxed mb-6 whitespace-pre-line">${communique}</p>
              <div class="text-right text-sm text-gray-600 italic mt-4">
                <p>+ Monseigneur Claude-Henri de Mis√©ricorde</p>
                <p>√âv√™que de Saint-Barbant</p>
              </div>
            </div>
          `;
        }
      }
    }
  </script>
</Layout>
